{"ast":null,"code":"/*\n * wysiwyg web editor\n *\n * suneditor.js\n * Copyright 2017 JiHong Lee.\n * MIT license.\n */\n'use strict';\n\nimport selectMenu from './_selectMenu';\nexport default {\n  name: 'anchor',\n  add: function (core) {\n    core.addModule([selectMenu]);\n    core.context.anchor = {\n      caller: {},\n      forms: this.setDialogForm(core),\n      host: (core._w.location.origin + core._w.location.pathname).replace(/\\/$/, ''),\n      callerContext: null\n    };\n  },\n  /** dialog */\n  setDialogForm: function (core) {\n    const lang = core.lang;\n    const relList = core.options.linkRel;\n    const defaultRel = (core.options.linkRelDefault.default || '').split(' ');\n    const icons = core.icons;\n    const forms = core.util.createElement('DIV');\n    let html = '<div class=\"se-dialog-body\">' + '<div class=\"se-dialog-form\">' + '<label>' + lang.dialogBox.linkBox.url + '</label>' + '<div class=\"se-dialog-form-files\">' + '<input class=\"se-input-form se-input-url\" type=\"text\" placeholder=\"' + (core.options.protocol || '') + '\" />' + '<button type=\"button\" class=\"se-btn se-dialog-files-edge-button _se_bookmark_button\" title=\"' + lang.dialogBox.linkBox.bookmark + '\" aria-label=\"' + lang.dialogBox.linkBox.bookmark + '\">' + icons.bookmark + '</button>' + core.plugins.selectMenu.setForm() + '</div>' + '<div class=\"se-anchor-preview-form\">' + '<span class=\"se-svg se-anchor-preview-icon _se_anchor_bookmark_icon\">' + icons.bookmark + '</span>' + '<span class=\"se-svg se-anchor-preview-icon _se_anchor_download_icon\">' + icons.download + '</span>' + '<pre class=\"se-link-preview\"></pre>' + '</div>' + '</div>' + '<div class=\"se-dialog-form\">' + '<label>' + lang.dialogBox.linkBox.text + '</label><input class=\"se-input-form _se_anchor_text\" type=\"text\" />' + '</div>' + '<div class=\"se-dialog-form-footer\">' + '<label><input type=\"checkbox\" class=\"se-dialog-btn-check _se_anchor_check\" />&nbsp;' + lang.dialogBox.linkBox.newWindowCheck + '</label>' + '<label><input type=\"checkbox\" class=\"se-dialog-btn-check _se_anchor_download\" />&nbsp;' + lang.dialogBox.linkBox.downloadLinkCheck + '</label>';\n    if (relList.length > 0) {\n      html += '<div class=\"se-anchor-rel\"><button type=\"button\" class=\"se-btn se-btn-select se-anchor-rel-btn\">&lt;rel&gt;</button>' + '<div class=\"se-anchor-rel-wrapper\"><pre class=\"se-link-preview se-anchor-rel-preview\"></pre></div>' + '<div class=\"se-list-layer\">' + '<div class=\"se-list-inner\">' + '<ul class=\"se-list-basic se-list-checked\">';\n      for (let i = 0, len = relList.length, rel; i < len; i++) {\n        rel = relList[i];\n        html += '<li><button type=\"button\" class=\"se-btn-list' + (defaultRel.indexOf(rel) > -1 ? ' se-checked' : '') + '\" data-command=\"' + rel + '\" title=\"' + rel + '\" aria-label=\"' + rel + '\"><span class=\"se-svg\">' + icons.checked + '</span>' + rel + '</button></li>';\n      }\n      html += '</ul></div></div></div>';\n    }\n    html += '</div></div>';\n    forms.innerHTML = html;\n    return forms;\n  },\n  initEvent: function (pluginName, forms) {\n    const anchorPlugin = this.plugins.anchor;\n    const context = this.context.anchor.caller[pluginName] = {\n      modal: forms,\n      urlInput: null,\n      linkDefaultRel: this.options.linkRelDefault,\n      defaultRel: this.options.linkRelDefault.default || '',\n      currentRel: [],\n      linkAnchor: null,\n      linkValue: '',\n      _change: false,\n      callerName: pluginName\n    };\n    if (typeof context.linkDefaultRel.default === 'string') context.linkDefaultRel.default = context.linkDefaultRel.default.trim();\n    if (typeof context.linkDefaultRel.check_new_window === 'string') context.linkDefaultRel.check_new_window = context.linkDefaultRel.check_new_window.trim();\n    if (typeof context.linkDefaultRel.check_bookmark === 'string') context.linkDefaultRel.check_bookmark = context.linkDefaultRel.check_bookmark.trim();\n    context.urlInput = forms.querySelector('.se-input-url');\n    context.anchorText = forms.querySelector('._se_anchor_text');\n    context.newWindowCheck = forms.querySelector('._se_anchor_check');\n    context.downloadCheck = forms.querySelector('._se_anchor_download');\n    context.download = forms.querySelector('._se_anchor_download_icon');\n    context.preview = forms.querySelector('.se-link-preview');\n    context.bookmark = forms.querySelector('._se_anchor_bookmark_icon');\n    context.bookmarkButton = forms.querySelector('._se_bookmark_button');\n    this.plugins.selectMenu.initEvent.call(this, pluginName, forms);\n    const listContext = this.context.selectMenu.caller[pluginName];\n\n    /** rel */\n    if (this.options.linkRel.length > 0) {\n      context.relButton = forms.querySelector('.se-anchor-rel-btn');\n      context.relList = forms.querySelector('.se-list-layer');\n      context.relPreview = forms.querySelector('.se-anchor-rel-preview');\n      context.relButton.addEventListener('click', anchorPlugin.onClick_relButton.bind(this, context));\n      context.relList.addEventListener('click', anchorPlugin.onClick_relList.bind(this, context));\n    }\n    context.newWindowCheck.addEventListener('change', anchorPlugin.onChange_newWindowCheck.bind(this, context));\n    context.downloadCheck.addEventListener('change', anchorPlugin.onChange_downloadCheck.bind(this, context));\n    context.anchorText.addEventListener('input', anchorPlugin.onChangeAnchorText.bind(this, context));\n    context.urlInput.addEventListener('input', anchorPlugin.onChangeUrlInput.bind(this, context));\n    context.urlInput.addEventListener('keydown', anchorPlugin.onKeyDownUrlInput.bind(this, listContext));\n    context.urlInput.addEventListener('focus', anchorPlugin.onFocusUrlInput.bind(this, context, listContext));\n    context.urlInput.addEventListener('blur', anchorPlugin.onBlurUrlInput.bind(this, listContext));\n    context.bookmarkButton.addEventListener('click', anchorPlugin.onClick_bookmarkButton.bind(this, context));\n  },\n  on: function (contextAnchor, update) {\n    const anchorPlugin = this.plugins.anchor;\n    if (!update) {\n      anchorPlugin.init.call(this, contextAnchor);\n      contextAnchor.anchorText.value = this.getSelection().toString().trim();\n      contextAnchor.newWindowCheck.checked = this.options.linkTargetNewWindow;\n    } else if (contextAnchor.linkAnchor) {\n      this.context.dialog.updateModal = true;\n      const href = contextAnchor.linkAnchor.getAttribute('href');\n      contextAnchor.linkValue = contextAnchor.preview.textContent = contextAnchor.urlInput.value = anchorPlugin.selfPathBookmark.call(this, href) ? href.substr(href.lastIndexOf('#')) : href;\n      contextAnchor.anchorText.value = contextAnchor.linkAnchor.textContent;\n      contextAnchor.newWindowCheck.checked = /_blank/i.test(contextAnchor.linkAnchor.target) ? true : false;\n      contextAnchor.downloadCheck.checked = contextAnchor.linkAnchor.download;\n    }\n    this.context.anchor.callerContext = contextAnchor;\n    anchorPlugin.setRel.call(this, contextAnchor, update && contextAnchor.linkAnchor ? contextAnchor.linkAnchor.rel : contextAnchor.defaultRel);\n    anchorPlugin.setLinkPreview.call(this, contextAnchor, contextAnchor.linkValue);\n    this.plugins.selectMenu.on.call(this, contextAnchor.callerName, this.plugins.anchor.setHeaderBookmark);\n  },\n  selfPathBookmark: function (path) {\n    const href = this._w.location.href.replace(/\\/$/, '');\n    return path.indexOf('#') === 0 || path.indexOf(href) === 0 && path.indexOf('#') === (href.indexOf(\"#\") === -1 ? href.length : href.substr(0, href.indexOf(\"#\")).length);\n  },\n  _closeRelMenu: null,\n  toggleRelList: function (contextAnchor, show) {\n    if (!show) {\n      if (this.plugins.anchor._closeRelMenu) this.plugins.anchor._closeRelMenu();\n    } else {\n      const target = contextAnchor.relButton;\n      const relList = contextAnchor.relList;\n      this.util.addClass(target, 'active');\n      relList.style.visibility = 'hidden';\n      relList.style.display = 'block';\n      if (!this.options.rtl) relList.style.left = target.offsetLeft + target.offsetWidth + 1 + 'px';else relList.style.left = target.offsetLeft - relList.offsetWidth - 1 + 'px';\n      relList.style.top = target.offsetTop + target.offsetHeight / 2 - relList.offsetHeight / 2 + 'px';\n      relList.style.visibility = '';\n      this.plugins.anchor._closeRelMenu = function (context, target, e) {\n        if (e && (context.relButton.contains(e.target) || context.relList.contains(e.target))) return;\n        this.util.removeClass(target, 'active');\n        context.relList.style.display = 'none';\n        this.modalForm.removeEventListener('click', this.plugins.anchor._closeRelMenu);\n        this.plugins.anchor._closeRelMenu = null;\n      }.bind(this, contextAnchor, target);\n      this.modalForm.addEventListener('click', this.plugins.anchor._closeRelMenu);\n    }\n  },\n  onClick_relButton: function (contextAnchor, e) {\n    this.plugins.anchor.toggleRelList.call(this, contextAnchor, !this.util.hasClass(e.target, 'active'));\n  },\n  onClick_relList: function (contextAnchor, e) {\n    const target = e.target;\n    const cmd = target.getAttribute('data-command');\n    if (!cmd) return;\n    const current = contextAnchor.currentRel;\n    const checked = this.util.toggleClass(target, 'se-checked');\n    const index = current.indexOf(cmd);\n    if (checked) {\n      if (index === -1) current.push(cmd);\n    } else {\n      if (index > -1) current.splice(index, 1);\n    }\n    contextAnchor.relPreview.title = contextAnchor.relPreview.textContent = current.join(' ');\n  },\n  setRel: function (contextAnchor, relAttr) {\n    const relListEl = contextAnchor.relList;\n    const rels = contextAnchor.currentRel = !relAttr ? [] : relAttr.split(' ');\n    if (!relListEl) return;\n    const checkedRel = relListEl.querySelectorAll('button');\n    for (let i = 0, len = checkedRel.length, cmd; i < len; i++) {\n      cmd = checkedRel[i].getAttribute('data-command');\n      if (rels.indexOf(cmd) > -1) {\n        this.util.addClass(checkedRel[i], 'se-checked');\n      } else {\n        this.util.removeClass(checkedRel[i], 'se-checked');\n      }\n    }\n    contextAnchor.relPreview.title = contextAnchor.relPreview.textContent = rels.join(' ');\n  },\n  createHeaderList: function (contextAnchor, contextList, urlValue) {\n    const headers = this.util.getListChildren(this.context.element.wysiwyg, function (current) {\n      return /h[1-6]/i.test(current.nodeName);\n    });\n    if (headers.length === 0) return;\n    const valueRegExp = new this._w.RegExp('^' + urlValue.replace(/^#/, ''), 'i');\n    const list = [];\n    let html = '';\n    for (let i = 0, len = headers.length, h; i < len; i++) {\n      h = headers[i];\n      if (!valueRegExp.test(h.textContent)) continue;\n      list.push(h);\n      html += '<li class=\"se-select-item\" data-index=\"' + i + '\">' + h.textContent + '</li>';\n    }\n    if (list.length === 0) {\n      this.plugins.selectMenu.close.call(this, contextList);\n    } else {\n      this.plugins.selectMenu.createList(contextList, list, html);\n      this.plugins.selectMenu.open.call(this, contextList, this.plugins.anchor._setMenuListPosition.bind(this, contextAnchor));\n    }\n  },\n  _setMenuListPosition: function (contextAnchor, list) {\n    list.style.top = contextAnchor.urlInput.offsetHeight + 1 + 'px';\n  },\n  onKeyDownUrlInput: function (contextList, e) {\n    const keyCode = e.keyCode;\n    switch (keyCode) {\n      case 38:\n        // up\n        e.preventDefault();\n        e.stopPropagation();\n        this.plugins.selectMenu.moveItem.call(this, contextList, -1);\n        break;\n      case 40:\n        // down\n        e.preventDefault();\n        e.stopPropagation();\n        this.plugins.selectMenu.moveItem.call(this, contextList, 1);\n        break;\n      case 13:\n        // enter\n        if (contextList.index > -1) {\n          e.preventDefault();\n          e.stopPropagation();\n          this.plugins.anchor.setHeaderBookmark.call(this, this.plugins.selectMenu.getItem(contextList, null));\n        }\n        break;\n    }\n  },\n  setHeaderBookmark: function (header) {\n    const contextAnchor = this.context.anchor.callerContext;\n    const id = header.id || 'h_' + this._w.Math.random().toString().replace(/.+\\./, '');\n    header.id = id;\n    contextAnchor.urlInput.value = '#' + id;\n    if (!contextAnchor.anchorText.value.trim() || !contextAnchor._change) {\n      contextAnchor.anchorText.value = header.textContent;\n    }\n    this.plugins.anchor.setLinkPreview.call(this, contextAnchor, contextAnchor.urlInput.value);\n    this.plugins.selectMenu.close.call(this, this.context.selectMenu.callerContext);\n    this.context.anchor.callerContext.urlInput.focus();\n  },\n  onChangeAnchorText: function (contextAnchor, e) {\n    contextAnchor._change = !!e.target.value.trim();\n  },\n  onChangeUrlInput: function (contextAnchor, e) {\n    const value = e.target.value.trim();\n    this.plugins.anchor.setLinkPreview.call(this, contextAnchor, value);\n    if (this.plugins.anchor.selfPathBookmark.call(this, value)) this.plugins.anchor.createHeaderList.call(this, contextAnchor, this.context.selectMenu.callerContext, value);else this.plugins.selectMenu.close.call(this, this.context.selectMenu.callerContext);\n  },\n  onFocusUrlInput: function (contextAnchor, contextLink) {\n    const value = contextAnchor.urlInput.value;\n    if (this.plugins.anchor.selfPathBookmark.call(this, value)) this.plugins.anchor.createHeaderList.call(this, contextAnchor, contextLink, value);\n  },\n  onBlurUrlInput: function (contextList) {\n    this.plugins.selectMenu.close.call(this, contextList);\n  },\n  setLinkPreview: function (context, value) {\n    const preview = context.preview;\n    const protocol = this.options.linkProtocol;\n    const noPrefix = this.options.linkNoPrefix;\n    const reservedProtocol = /^(mailto\\:|tel\\:|sms\\:|https*\\:\\/\\/|#)/.test(value) || value.indexOf(protocol) === 0;\n    const sameProtocol = !protocol ? false : this._w.RegExp('^' + value.substr(0, protocol.length)).test(protocol);\n    value = context.linkValue = preview.textContent = !value ? '' : noPrefix ? value : protocol && !reservedProtocol && !sameProtocol ? protocol + value : reservedProtocol ? value : /^www\\./.test(value) ? 'http://' + value : this.context.anchor.host + (/^\\//.test(value) ? '' : '/') + value;\n    if (this.plugins.anchor.selfPathBookmark.call(this, value)) {\n      context.bookmark.style.display = 'block';\n      this.util.addClass(context.bookmarkButton, 'active');\n    } else {\n      context.bookmark.style.display = 'none';\n      this.util.removeClass(context.bookmarkButton, 'active');\n    }\n    if (!this.plugins.anchor.selfPathBookmark.call(this, value) && context.downloadCheck.checked) {\n      context.download.style.display = 'block';\n    } else {\n      context.download.style.display = 'none';\n    }\n  },\n  setCtx: function (anchor, contextAnchor) {\n    if (!anchor) return;\n    contextAnchor.linkAnchor = anchor;\n    contextAnchor.linkValue = anchor.href;\n    contextAnchor.currentRel = anchor.rel.split(\" \");\n  },\n  updateAnchor: function (anchor, url, displayText, contextAnchor, notText) {\n    // download\n    if (!this.plugins.anchor.selfPathBookmark.call(this, url) && contextAnchor.downloadCheck.checked) {\n      anchor.setAttribute('download', displayText || url);\n    } else {\n      anchor.removeAttribute('download');\n    }\n\n    // new window\n    if (contextAnchor.newWindowCheck.checked) anchor.target = '_blank';else anchor.removeAttribute('target');\n\n    // rel\n    const rel = contextAnchor.currentRel.join(' ');\n    if (!rel) anchor.removeAttribute('rel');else anchor.rel = rel;\n\n    // set url\n    anchor.href = url;\n    if (notText) {\n      if (anchor.children.length === 0) anchor.textContent = '';\n    } else {\n      anchor.textContent = displayText;\n    }\n  },\n  createAnchor: function (contextAnchor, notText) {\n    if (contextAnchor.linkValue.length === 0) return null;\n    const url = contextAnchor.linkValue;\n    const anchor = contextAnchor.anchorText;\n    const displayText = anchor.value.length === 0 ? url : anchor.value;\n    const oA = contextAnchor.linkAnchor || this.util.createElement('A');\n    this.plugins.anchor.updateAnchor.call(this, oA, url, displayText, contextAnchor, notText);\n    contextAnchor.linkValue = contextAnchor.preview.textContent = contextAnchor.urlInput.value = contextAnchor.anchorText.value = '';\n    return oA;\n  },\n  onClick_bookmarkButton: function (contextAnchor) {\n    let url = contextAnchor.urlInput.value;\n    if (this.plugins.anchor.selfPathBookmark.call(this, url)) {\n      url = url.substr(1);\n      contextAnchor.bookmark.style.display = 'none';\n      this.util.removeClass(contextAnchor.bookmarkButton, 'active');\n      this.plugins.selectMenu.close.call(this, this.context.selectMenu.callerContext);\n    } else {\n      url = '#' + url;\n      contextAnchor.bookmark.style.display = 'block';\n      this.util.addClass(contextAnchor.bookmarkButton, 'active');\n      contextAnchor.downloadCheck.checked = false;\n      contextAnchor.download.style.display = 'none';\n      this.plugins.anchor.createHeaderList.call(this, contextAnchor, this.context.selectMenu.callerContext, url);\n    }\n    contextAnchor.urlInput.value = url;\n    this.plugins.anchor.setLinkPreview.call(this, contextAnchor, url);\n    contextAnchor.urlInput.focus();\n  },\n  onChange_newWindowCheck: function (contextAnchor, e) {\n    if (typeof contextAnchor.linkDefaultRel.check_new_window !== 'string') return;\n    if (e.target.checked) {\n      this.plugins.anchor.setRel.call(this, contextAnchor, this.plugins.anchor._relMerge.call(this, contextAnchor, contextAnchor.linkDefaultRel.check_new_window));\n    } else {\n      this.plugins.anchor.setRel.call(this, contextAnchor, this.plugins.anchor._relDelete.call(this, contextAnchor, contextAnchor.linkDefaultRel.check_new_window));\n    }\n  },\n  onChange_downloadCheck: function (contextAnchor, e) {\n    if (e.target.checked) {\n      contextAnchor.download.style.display = 'block';\n      contextAnchor.bookmark.style.display = 'none';\n      this.util.removeClass(contextAnchor.bookmarkButton, 'active');\n      contextAnchor.linkValue = contextAnchor.preview.textContent = contextAnchor.urlInput.value = contextAnchor.urlInput.value.replace(/^\\#+/, '');\n      if (typeof contextAnchor.linkDefaultRel.check_bookmark === 'string') {\n        this.plugins.anchor.setRel.call(this, contextAnchor, this.plugins.anchor._relMerge.call(this, contextAnchor, contextAnchor.linkDefaultRel.check_bookmark));\n      }\n    } else {\n      contextAnchor.download.style.display = 'none';\n      if (typeof contextAnchor.linkDefaultRel.check_bookmark === 'string') {\n        this.plugins.anchor.setRel.call(this, contextAnchor, this.plugins.anchor._relDelete.call(this, contextAnchor, contextAnchor.linkDefaultRel.check_bookmark));\n      }\n    }\n  },\n  _relMerge: function (contextAnchor, relAttr) {\n    const current = contextAnchor.currentRel;\n    if (!relAttr) return current.join(' ');\n    if (/^only\\:/.test(relAttr)) {\n      relAttr = relAttr.replace(/^only\\:/, '').trim();\n      contextAnchor.currentRel = relAttr.split(' ');\n      return relAttr;\n    }\n    const rels = relAttr.split(' ');\n    for (let i = 0, len = rels.length, index; i < len; i++) {\n      index = current.indexOf(rels[i]);\n      if (index === -1) current.push(rels[i]);\n    }\n    return current.join(' ');\n  },\n  _relDelete: function (contextAnchor, relAttr) {\n    if (!relAttr) return contextAnchor.currentRel.join(' ');\n    if (/^only\\:/.test(relAttr)) relAttr = relAttr.replace(/^only\\:/, '').trim();\n    const rels = contextAnchor.currentRel.join(' ').replace(this._w.RegExp(relAttr + '\\\\s*'), '');\n    contextAnchor.currentRel = rels.split(' ');\n    return rels;\n  },\n  init: function (contextAnchor) {\n    contextAnchor.linkAnchor = null;\n    contextAnchor.linkValue = contextAnchor.preview.textContent = contextAnchor.urlInput.value = '';\n    contextAnchor.anchorText.value = '';\n    contextAnchor.newWindowCheck.checked = false;\n    contextAnchor.downloadCheck.checked = false;\n    contextAnchor._change = false;\n    this.plugins.anchor.setRel.call(this, contextAnchor, contextAnchor.defaultRel);\n    if (contextAnchor.relList) {\n      this.plugins.anchor.toggleRelList.call(this, contextAnchor, false);\n    }\n    this.context.anchor.callerContext = null;\n    this.plugins.selectMenu.init.call(this, this.context.selectMenu.callerContext);\n  }\n};","map":{"version":3,"names":["selectMenu","name","add","core","addModule","context","anchor","caller","forms","setDialogForm","host","_w","location","origin","pathname","replace","callerContext","lang","relList","options","linkRel","defaultRel","linkRelDefault","default","split","icons","util","createElement","html","dialogBox","linkBox","url","protocol","bookmark","plugins","setForm","download","text","newWindowCheck","downloadLinkCheck","length","i","len","rel","indexOf","checked","innerHTML","initEvent","pluginName","anchorPlugin","modal","urlInput","linkDefaultRel","currentRel","linkAnchor","linkValue","_change","callerName","trim","check_new_window","check_bookmark","querySelector","anchorText","downloadCheck","preview","bookmarkButton","call","listContext","relButton","relPreview","addEventListener","onClick_relButton","bind","onClick_relList","onChange_newWindowCheck","onChange_downloadCheck","onChangeAnchorText","onChangeUrlInput","onKeyDownUrlInput","onFocusUrlInput","onBlurUrlInput","onClick_bookmarkButton","on","contextAnchor","update","init","value","getSelection","toString","linkTargetNewWindow","dialog","updateModal","href","getAttribute","textContent","selfPathBookmark","substr","lastIndexOf","test","target","setRel","setLinkPreview","setHeaderBookmark","path","_closeRelMenu","toggleRelList","show","addClass","style","visibility","display","rtl","left","offsetLeft","offsetWidth","top","offsetTop","offsetHeight","e","contains","removeClass","modalForm","removeEventListener","hasClass","cmd","current","toggleClass","index","push","splice","title","join","relAttr","relListEl","rels","checkedRel","querySelectorAll","createHeaderList","contextList","urlValue","headers","getListChildren","element","wysiwyg","nodeName","valueRegExp","RegExp","list","h","close","createList","open","_setMenuListPosition","keyCode","preventDefault","stopPropagation","moveItem","getItem","header","id","Math","random","focus","contextLink","linkProtocol","noPrefix","linkNoPrefix","reservedProtocol","sameProtocol","setCtx","updateAnchor","displayText","notText","setAttribute","removeAttribute","children","createAnchor","oA","_relMerge","_relDelete"],"sources":["E:/Programming/React/New folder (2)/dynamicArt/dynamic-article/node_modules/suneditor/src/plugins/modules/_anchor.js"],"sourcesContent":["/*\n * wysiwyg web editor\n *\n * suneditor.js\n * Copyright 2017 JiHong Lee.\n * MIT license.\n */\n'use strict';\n\nimport selectMenu from './_selectMenu';\n\nexport default {\n    name: 'anchor',\n    add: function (core) {\n        core.addModule([selectMenu]);\n        \n        core.context.anchor = {\n            caller: {},\n            forms: this.setDialogForm(core),\n            host: (core._w.location.origin + core._w.location.pathname).replace(/\\/$/, ''),\n            callerContext: null\n        };\n    },\n\n    /** dialog */\n    setDialogForm: function (core) {\n        const lang = core.lang;\n        const relList = core.options.linkRel;\n        const defaultRel = (core.options.linkRelDefault.default || '').split(' ');\n        const icons = core.icons;\n        const forms = core.util.createElement('DIV');\n\n        let html = '<div class=\"se-dialog-body\">' +\n            '<div class=\"se-dialog-form\">' +\n                '<label>' + lang.dialogBox.linkBox.url + '</label>' +\n                '<div class=\"se-dialog-form-files\">' +\n                    '<input class=\"se-input-form se-input-url\" type=\"text\" placeholder=\"' + (core.options.protocol || '') + '\" />' +\n                    '<button type=\"button\" class=\"se-btn se-dialog-files-edge-button _se_bookmark_button\" title=\"' + lang.dialogBox.linkBox.bookmark + '\" aria-label=\"' + lang.dialogBox.linkBox.bookmark + '\">' + icons.bookmark + '</button>' +\n                    core.plugins.selectMenu.setForm() +\n                '</div>' +\n                '<div class=\"se-anchor-preview-form\">' +\n                    '<span class=\"se-svg se-anchor-preview-icon _se_anchor_bookmark_icon\">' + icons.bookmark + '</span>' +\n                    '<span class=\"se-svg se-anchor-preview-icon _se_anchor_download_icon\">' + icons.download + '</span>' +\n                    '<pre class=\"se-link-preview\"></pre>' +\n                '</div>' +\n            '</div>' +\n            '<div class=\"se-dialog-form\">' +\n                '<label>' + lang.dialogBox.linkBox.text + '</label><input class=\"se-input-form _se_anchor_text\" type=\"text\" />' +\n            '</div>' +\n            '<div class=\"se-dialog-form-footer\">' +\n                '<label><input type=\"checkbox\" class=\"se-dialog-btn-check _se_anchor_check\" />&nbsp;' + lang.dialogBox.linkBox.newWindowCheck + '</label>' +\n                '<label><input type=\"checkbox\" class=\"se-dialog-btn-check _se_anchor_download\" />&nbsp;' + lang.dialogBox.linkBox.downloadLinkCheck + '</label>';\n            if (relList.length > 0) {\n                html += '<div class=\"se-anchor-rel\"><button type=\"button\" class=\"se-btn se-btn-select se-anchor-rel-btn\">&lt;rel&gt;</button>' +\n                    '<div class=\"se-anchor-rel-wrapper\"><pre class=\"se-link-preview se-anchor-rel-preview\"></pre></div>' +\n                    '<div class=\"se-list-layer\">' +\n                        '<div class=\"se-list-inner\">' +\n                            '<ul class=\"se-list-basic se-list-checked\">';\n                for (let i = 0, len = relList.length, rel; i < len; i++) {\n                    rel = relList[i];\n                    html += '<li><button type=\"button\" class=\"se-btn-list' + (defaultRel.indexOf(rel) > -1 ? ' se-checked' : '') + '\" data-command=\"' + rel + '\" title=\"' + rel + '\" aria-label=\"' + rel + '\"><span class=\"se-svg\">' + icons.checked + '</span>' + rel + '</button></li>';\n                }\n                html += '</ul></div></div></div>';\n            }\n\n        html += '</div></div>';\n\n        forms.innerHTML = html;\n        return forms;\n    },\n\n    initEvent: function (pluginName, forms) {\n        const anchorPlugin = this.plugins.anchor;\n        const context = this.context.anchor.caller[pluginName] = {\n            modal: forms,\n            urlInput: null,\n            linkDefaultRel: this.options.linkRelDefault,\n            defaultRel: this.options.linkRelDefault.default || '',\n            currentRel: [],\n            linkAnchor: null,\n            linkValue: '',\n            _change: false,\n            callerName: pluginName\n        };\n\n        if (typeof context.linkDefaultRel.default === 'string') context.linkDefaultRel.default = context.linkDefaultRel.default.trim();\n        if (typeof context.linkDefaultRel.check_new_window === 'string') context.linkDefaultRel.check_new_window = context.linkDefaultRel.check_new_window.trim();\n        if (typeof context.linkDefaultRel.check_bookmark === 'string') context.linkDefaultRel.check_bookmark = context.linkDefaultRel.check_bookmark.trim();\n\n        context.urlInput = forms.querySelector('.se-input-url');\n        context.anchorText = forms.querySelector('._se_anchor_text');\n        context.newWindowCheck = forms.querySelector('._se_anchor_check');\n        context.downloadCheck = forms.querySelector('._se_anchor_download');\n        context.download = forms.querySelector('._se_anchor_download_icon');\n        context.preview = forms.querySelector('.se-link-preview');\n        context.bookmark = forms.querySelector('._se_anchor_bookmark_icon');\n        context.bookmarkButton = forms.querySelector('._se_bookmark_button');\n\n        this.plugins.selectMenu.initEvent.call(this, pluginName, forms);\n        const listContext = this.context.selectMenu.caller[pluginName];\n        \n        /** rel */\n        if (this.options.linkRel.length > 0) {\n            context.relButton = forms.querySelector('.se-anchor-rel-btn');\n            context.relList = forms.querySelector('.se-list-layer');\n            context.relPreview = forms.querySelector('.se-anchor-rel-preview');\n            context.relButton.addEventListener('click', anchorPlugin.onClick_relButton.bind(this, context));\n            context.relList.addEventListener('click', anchorPlugin.onClick_relList.bind(this, context));\n        }\n\n        context.newWindowCheck.addEventListener('change', anchorPlugin.onChange_newWindowCheck.bind(this, context));\n        context.downloadCheck.addEventListener('change', anchorPlugin.onChange_downloadCheck.bind(this, context));\n        context.anchorText.addEventListener('input', anchorPlugin.onChangeAnchorText.bind(this, context));\n        context.urlInput.addEventListener('input', anchorPlugin.onChangeUrlInput.bind(this, context));\n        context.urlInput.addEventListener('keydown', anchorPlugin.onKeyDownUrlInput.bind(this, listContext));\n        context.urlInput.addEventListener('focus', anchorPlugin.onFocusUrlInput.bind(this, context, listContext));\n        context.urlInput.addEventListener('blur', anchorPlugin.onBlurUrlInput.bind(this, listContext));\n        context.bookmarkButton.addEventListener('click', anchorPlugin.onClick_bookmarkButton.bind(this, context));\n    },\n\n    on: function (contextAnchor, update) {\n        const anchorPlugin = this.plugins.anchor;\n\n        if (!update) {\n            anchorPlugin.init.call(this, contextAnchor);\n            contextAnchor.anchorText.value = this.getSelection().toString().trim();\n            contextAnchor.newWindowCheck.checked = this.options.linkTargetNewWindow;\n        } else if (contextAnchor.linkAnchor) {\n            this.context.dialog.updateModal = true;\n            const href = contextAnchor.linkAnchor.getAttribute('href');\n            contextAnchor.linkValue = contextAnchor.preview.textContent = contextAnchor.urlInput.value = anchorPlugin.selfPathBookmark.call(this, href) ? href.substr(href.lastIndexOf('#')) : href;\n            contextAnchor.anchorText.value = contextAnchor.linkAnchor.textContent;\n            contextAnchor.newWindowCheck.checked = (/_blank/i.test(contextAnchor.linkAnchor.target) ? true : false);\n            contextAnchor.downloadCheck.checked = contextAnchor.linkAnchor.download;\n        }\n\n        this.context.anchor.callerContext = contextAnchor;\n        anchorPlugin.setRel.call(this, contextAnchor, (update && contextAnchor.linkAnchor) ? contextAnchor.linkAnchor.rel : contextAnchor.defaultRel);\n        anchorPlugin.setLinkPreview.call(this, contextAnchor, contextAnchor.linkValue);\n        this.plugins.selectMenu.on.call(this, contextAnchor.callerName, this.plugins.anchor.setHeaderBookmark);\n    },\n\n    selfPathBookmark: function(path) {\n        const href = this._w.location.href.replace(/\\/$/, '');\n        return path.indexOf('#') === 0 || (path.indexOf(href) === 0 && path.indexOf('#') === (href.indexOf(\"#\") === -1 ? href.length : href.substr(0, href.indexOf(\"#\")).length));\n    },\n\n    _closeRelMenu: null,\n    toggleRelList: function (contextAnchor, show) {\n        if (!show) {\n            if (this.plugins.anchor._closeRelMenu) this.plugins.anchor._closeRelMenu();\n        } else {\n            const target = contextAnchor.relButton;\n            const relList = contextAnchor.relList;\n            this.util.addClass(target, 'active');\n            relList.style.visibility = 'hidden';\n            relList.style.display = 'block';\n            if (!this.options.rtl) relList.style.left = (target.offsetLeft + target.offsetWidth + 1) + 'px';\n            else relList.style.left = (target.offsetLeft - relList.offsetWidth - 1) + 'px';\n            relList.style.top = (target.offsetTop + (target.offsetHeight / 2) - (relList.offsetHeight / 2)) + 'px';\n            relList.style.visibility = '';\n\n            this.plugins.anchor._closeRelMenu = function (context, target, e) {\n                if (e && (context.relButton.contains(e.target) || context.relList.contains(e.target))) return;\n                this.util.removeClass(target, 'active');\n                context.relList.style.display = 'none';\n                this.modalForm.removeEventListener('click', this.plugins.anchor._closeRelMenu);\n                this.plugins.anchor._closeRelMenu = null;\n            }.bind(this, contextAnchor, target);\n    \n            this.modalForm.addEventListener('click', this.plugins.anchor._closeRelMenu);\n        }\n    },\n\n    onClick_relButton: function (contextAnchor, e) {\n        this.plugins.anchor.toggleRelList.call(this, contextAnchor, !this.util.hasClass(e.target, 'active'));\n    },\n\n    onClick_relList: function (contextAnchor, e) {\n        const target = e.target;\n        const cmd = target.getAttribute('data-command');\n        if (!cmd) return;\n        \n        const current = contextAnchor.currentRel;\n        const checked = this.util.toggleClass(target, 'se-checked');\n        const index = current.indexOf(cmd);\n        if (checked) {\n            if (index === -1) current.push(cmd);\n        } else {\n            if (index > -1) current.splice(index, 1);\n        }\n\n        contextAnchor.relPreview.title = contextAnchor.relPreview.textContent = current.join(' ');\n    },\n\n    setRel: function (contextAnchor, relAttr) {\n        const relListEl = contextAnchor.relList;\n        const rels = contextAnchor.currentRel = !relAttr ? [] : relAttr.split(' ');\n        if (!relListEl) return;\n\n        const checkedRel = relListEl.querySelectorAll('button');\n        for (let i = 0, len = checkedRel.length, cmd; i < len; i++) {\n            cmd = checkedRel[i].getAttribute('data-command');\n            if (rels.indexOf(cmd) > -1) {\n                this.util.addClass(checkedRel[i], 'se-checked');\n            } else {\n                this.util.removeClass(checkedRel[i], 'se-checked');\n            }\n        }\n\n        contextAnchor.relPreview.title = contextAnchor.relPreview.textContent = rels.join(' ');\n    },\n\n    createHeaderList: function (contextAnchor, contextList, urlValue) {\n        const headers = this.util.getListChildren(this.context.element.wysiwyg, function(current) {\n            return /h[1-6]/i.test(current.nodeName);\n        });\n        if (headers.length === 0) return;\n\n        const valueRegExp = new this._w.RegExp('^' + urlValue.replace(/^#/, ''), 'i');\n        const list = [];\n        let html = '';\n        for(let i = 0, len = headers.length, h; i < len; i++) {\n            h = headers[i];\n            if (!valueRegExp.test(h.textContent)) continue;\n            list.push(h);\n            html += '<li class=\"se-select-item\" data-index=\"' + i + '\">' + h.textContent + '</li>';\n        }\n\n        if (list.length === 0) {\n            this.plugins.selectMenu.close.call(this, contextList);\n        } else {\n            this.plugins.selectMenu.createList(contextList, list, html);\n            this.plugins.selectMenu.open.call(this, contextList, this.plugins.anchor._setMenuListPosition.bind(this, contextAnchor));\n        }\n    },\n\n    _setMenuListPosition: function (contextAnchor, list) {\n        list.style.top = (contextAnchor.urlInput.offsetHeight + 1) + 'px';\n    },\n\n    onKeyDownUrlInput: function (contextList, e) {\n        const keyCode = e.keyCode;\n        switch (keyCode) {\n            case 38: // up\n                e.preventDefault();\n                e.stopPropagation();\n                this.plugins.selectMenu.moveItem.call(this, contextList, -1);\n                break;\n            case 40: // down\n                e.preventDefault();\n                e.stopPropagation();\n                this.plugins.selectMenu.moveItem.call(this, contextList, 1);\n                break;\n            case 13: // enter\n                if (contextList.index > -1) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    this.plugins.anchor.setHeaderBookmark.call(this, this.plugins.selectMenu.getItem(contextList, null));\n                }\n                break;\n        }\n    },\n\n    setHeaderBookmark: function (header) {\n        const contextAnchor = this.context.anchor.callerContext;\n        const id = header.id || 'h_' + this._w.Math.random().toString().replace(/.+\\./, '');\n        header.id = id;\n        contextAnchor.urlInput.value = '#' + id;\n\n        if (!contextAnchor.anchorText.value.trim() || !contextAnchor._change) {\n            contextAnchor.anchorText.value = header.textContent;\n        }\n        \n        this.plugins.anchor.setLinkPreview.call(this, contextAnchor, contextAnchor.urlInput.value);\n        this.plugins.selectMenu.close.call(this, this.context.selectMenu.callerContext);\n        this.context.anchor.callerContext.urlInput.focus();\n    },\n\n    onChangeAnchorText: function (contextAnchor, e) {\n        contextAnchor._change = !!e.target.value.trim();\n    },\n\n    onChangeUrlInput: function (contextAnchor, e) {\n        const value = e.target.value.trim();\n        this.plugins.anchor.setLinkPreview.call(this, contextAnchor, value);\n\n        if (this.plugins.anchor.selfPathBookmark.call(this, value)) this.plugins.anchor.createHeaderList.call(this, contextAnchor, this.context.selectMenu.callerContext, value);\n        else this.plugins.selectMenu.close.call(this, this.context.selectMenu.callerContext);\n    },\n\n    onFocusUrlInput: function (contextAnchor, contextLink) {\n        const value = contextAnchor.urlInput.value;\n        if (this.plugins.anchor.selfPathBookmark.call(this, value)) this.plugins.anchor.createHeaderList.call(this, contextAnchor, contextLink, value);\n    },\n\n    onBlurUrlInput: function (contextList) {\n        this.plugins.selectMenu.close.call(this, contextList);\n    },\n\n    setLinkPreview: function (context, value) {\n        const preview = context.preview;\n        const protocol = this.options.linkProtocol;\n        const noPrefix = this.options.linkNoPrefix;\n        const reservedProtocol  = /^(mailto\\:|tel\\:|sms\\:|https*\\:\\/\\/|#)/.test(value) || value.indexOf(protocol) === 0;\n        const sameProtocol = !protocol ? false : this._w.RegExp('^' + value.substr(0, protocol.length)).test(protocol);\n        value = context.linkValue = preview.textContent = !value ? '' : noPrefix ? value : (protocol && !reservedProtocol && !sameProtocol) ? protocol + value : reservedProtocol ? value : /^www\\./.test(value) ? 'http://' + value : this.context.anchor.host + (/^\\//.test(value) ? '' : '/') + value;\n\n        if (this.plugins.anchor.selfPathBookmark.call(this, value)) {\n            context.bookmark.style.display = 'block';\n            this.util.addClass(context.bookmarkButton, 'active');\n        } else {\n            context.bookmark.style.display = 'none';\n            this.util.removeClass(context.bookmarkButton, 'active');\n        }\n\n        if (!this.plugins.anchor.selfPathBookmark.call(this, value) && context.downloadCheck.checked) {\n            context.download.style.display = 'block';\n        } else {\n            context.download.style.display = 'none';\n        }\n    },\n\n    setCtx: function (anchor, contextAnchor) {\n        if (!anchor) return;\n        contextAnchor.linkAnchor = anchor;\n        contextAnchor.linkValue = anchor.href;\n        contextAnchor.currentRel = anchor.rel.split(\" \");\n    },\n\n    updateAnchor: function (anchor, url, displayText, contextAnchor, notText) {\n        // download\n        if (!this.plugins.anchor.selfPathBookmark.call(this, url) && contextAnchor.downloadCheck.checked) {\n            anchor.setAttribute('download', displayText || url);\n        } else {\n            anchor.removeAttribute('download');\n        }\n\n        // new window\n        if (contextAnchor.newWindowCheck.checked) anchor.target = '_blank';\n        else anchor.removeAttribute('target');\n        \n        // rel\n        const rel = contextAnchor.currentRel.join(' ');\n        if (!rel) anchor.removeAttribute('rel');\n        else anchor.rel = rel;\n\n        // set url\n        anchor.href = url;\n        if (notText) {\n            if (anchor.children.length === 0) anchor.textContent = '';\n        } else {\n            anchor.textContent = displayText;\n        }\n    },\n\n    createAnchor: function (contextAnchor, notText) {\n        if (contextAnchor.linkValue.length === 0) return null;\n        \n        const url = contextAnchor.linkValue;\n        const anchor = contextAnchor.anchorText;\n        const displayText = anchor.value.length === 0 ? url : anchor.value;\n\n        const oA = contextAnchor.linkAnchor || this.util.createElement('A');\n        this.plugins.anchor.updateAnchor.call(this, oA, url, displayText, contextAnchor, notText);\n\n        contextAnchor.linkValue = contextAnchor.preview.textContent = contextAnchor.urlInput.value = contextAnchor.anchorText.value = '';\n\n        return oA;\n    },\n\n    onClick_bookmarkButton: function (contextAnchor) {\n        let url = contextAnchor.urlInput.value;\n        if (this.plugins.anchor.selfPathBookmark.call(this, url)) {\n            url = url.substr(1);\n            contextAnchor.bookmark.style.display = 'none';\n            this.util.removeClass(contextAnchor.bookmarkButton, 'active');\n            this.plugins.selectMenu.close.call(this, this.context.selectMenu.callerContext);\n        } else {\n            url = '#' + url;\n            contextAnchor.bookmark.style.display = 'block';\n            this.util.addClass(contextAnchor.bookmarkButton, 'active');\n            contextAnchor.downloadCheck.checked = false;\n            contextAnchor.download.style.display = 'none';\n            this.plugins.anchor.createHeaderList.call(this, contextAnchor, this.context.selectMenu.callerContext, url);\n        }\n\n        contextAnchor.urlInput.value = url;\n        this.plugins.anchor.setLinkPreview.call(this, contextAnchor, url);\n        contextAnchor.urlInput.focus();\n    },\n\n    onChange_newWindowCheck: function (contextAnchor, e) {\n        if (typeof contextAnchor.linkDefaultRel.check_new_window !== 'string') return;\n        if (e.target.checked) {\n            this.plugins.anchor.setRel.call(this, contextAnchor, this.plugins.anchor._relMerge.call(this, contextAnchor, contextAnchor.linkDefaultRel.check_new_window));\n        } else {\n            this.plugins.anchor.setRel.call(this, contextAnchor, this.plugins.anchor._relDelete.call(this, contextAnchor, contextAnchor.linkDefaultRel.check_new_window));\n        }\n    },\n\n    onChange_downloadCheck: function (contextAnchor, e) {\n        if (e.target.checked) {\n            contextAnchor.download.style.display = 'block';\n            contextAnchor.bookmark.style.display = 'none';\n            this.util.removeClass(contextAnchor.bookmarkButton, 'active');\n            contextAnchor.linkValue = contextAnchor.preview.textContent = contextAnchor.urlInput.value = contextAnchor.urlInput.value.replace(/^\\#+/, '');\n            if (typeof contextAnchor.linkDefaultRel.check_bookmark === 'string') {\n                this.plugins.anchor.setRel.call(this, contextAnchor, this.plugins.anchor._relMerge.call(this, contextAnchor, contextAnchor.linkDefaultRel.check_bookmark));\n            }\n        } else {\n            contextAnchor.download.style.display = 'none';\n            if (typeof contextAnchor.linkDefaultRel.check_bookmark === 'string') {\n                this.plugins.anchor.setRel.call(this, contextAnchor, this.plugins.anchor._relDelete.call(this, contextAnchor, contextAnchor.linkDefaultRel.check_bookmark));\n            }\n        }\n    },\n\n    _relMerge: function (contextAnchor, relAttr) {\n        const current = contextAnchor.currentRel;\n        if (!relAttr) return current.join(' ');\n        \n        if (/^only\\:/.test(relAttr)) {\n            relAttr = relAttr.replace(/^only\\:/, '').trim();\n            contextAnchor.currentRel = relAttr.split(' ');\n            return relAttr;\n        }\n\n        const rels = relAttr.split(' ');\n        for (let i = 0, len = rels.length, index; i < len; i++) {\n            index = current.indexOf(rels[i]);\n            if (index === -1) current.push(rels[i]);\n        }\n\n        return current.join(' ');\n    },\n\n    _relDelete: function (contextAnchor, relAttr) {\n        if (!relAttr) return contextAnchor.currentRel.join(' ');\n        if (/^only\\:/.test(relAttr)) relAttr = relAttr.replace(/^only\\:/, '').trim();\n\n        const rels = contextAnchor.currentRel.join(' ').replace(this._w.RegExp(relAttr + '\\\\s*'), '');\n        contextAnchor.currentRel = rels.split(' ');\n        return rels;\n    },\n\n    init: function (contextAnchor) {\n        contextAnchor.linkAnchor = null;\n        contextAnchor.linkValue = contextAnchor.preview.textContent = contextAnchor.urlInput.value = '';\n        contextAnchor.anchorText.value = '';\n        contextAnchor.newWindowCheck.checked = false;\n        contextAnchor.downloadCheck.checked = false;\n        contextAnchor._change = false;\n        this.plugins.anchor.setRel.call(this, contextAnchor, contextAnchor.defaultRel);\n        if (contextAnchor.relList) {\n            this.plugins.anchor.toggleRelList.call(this, contextAnchor, false);\n        }\n        this.context.anchor.callerContext = null;\n        this.plugins.selectMenu.init.call(this, this.context.selectMenu.callerContext);\n    }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}