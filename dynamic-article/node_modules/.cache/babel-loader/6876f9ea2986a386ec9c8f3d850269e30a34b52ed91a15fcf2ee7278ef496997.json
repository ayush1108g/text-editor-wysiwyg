{"ast":null,"code":"/*\n * wysiwyg web editor\n *\n * suneditor.js\n * Copyright 2017 JiHong Lee.\n * MIT license.\n */\n'use strict';\n\n(function (global, factory) {\n  if (typeof module === 'object' && typeof module.exports === 'object') {\n    module.exports = global.document ? factory(global, true) : function (w) {\n      if (!w.document) {\n        throw new Error('SUNEDITOR_MODULES a window with a document');\n      }\n      return factory(w);\n    };\n  } else {\n    factory(global);\n  }\n})(typeof window !== 'undefined' ? window : this, function (window, noGlobal) {\n  const resizing = {\n    name: 'resizing',\n    /**\n     * @description Constructor\n     * Require context properties when resizing module\n        inputX: Element,\n        inputY: Element,\n        _container: null,\n        _cover: null,\n        _element: null,\n        _element_w: 1,\n        _element_h: 1,\n        _element_l: 0,\n        _element_t: 0,\n        _defaultSizeX: 'auto',\n        _defaultSizeY: 'auto',\n        _origin_w: core.options.imageWidth === 'auto' ? '' : core.options.imageWidth,\n        _origin_h: core.options.imageHeight === 'auto' ? '' : core.options.imageHeight,\n        _proportionChecked: true,\n        // -- select function --\n        _resizing: core.options.imageResizing,\n        _resizeDotHide: !core.options.imageHeightShow,\n        _rotation: core.options.imageRotation,\n        _onlyPercentage: core.options.imageSizeOnlyPercentage,\n        _ratio: false,\n        _ratioX: 1,\n        _ratioY: 1\n        _captionShow: true,\n        // -- when used caption (_captionShow: true) --\n        _caption: null,\n        _captionChecked: false,\n        captionCheckEl: null,\n     * @param {Object} core Core object \n     */\n    add: function (core) {\n      const icons = core.icons;\n      const context = core.context;\n      context.resizing = {\n        _resizeClientX: 0,\n        _resizeClientY: 0,\n        _resize_plugin: '',\n        _resize_w: 0,\n        _resize_h: 0,\n        _origin_w: 0,\n        _origin_h: 0,\n        _rotateVertical: false,\n        _resize_direction: '',\n        _move_path: null,\n        _isChange: false,\n        alignIcons: {\n          basic: icons.align_justify,\n          left: icons.align_left,\n          right: icons.align_right,\n          center: icons.align_center\n        }\n      };\n\n      /** resize controller, button */\n      let resize_div_container = this.setController_resize(core);\n      context.resizing.resizeContainer = resize_div_container;\n      context.resizing.resizeDiv = resize_div_container.querySelector('.se-modal-resize');\n      context.resizing.resizeDot = resize_div_container.querySelector('.se-resize-dot');\n      context.resizing.resizeDisplay = resize_div_container.querySelector('.se-resize-display');\n      let resize_button = this.setController_button(core);\n      context.resizing.resizeButton = resize_button;\n      let resize_handles = context.resizing.resizeHandles = context.resizing.resizeDot.querySelectorAll('span');\n      context.resizing.resizeButtonGroup = resize_button.querySelector('._se_resizing_btn_group');\n      context.resizing.rotationButtons = resize_button.querySelectorAll('._se_resizing_btn_group ._se_rotation');\n      context.resizing.percentageButtons = resize_button.querySelectorAll('._se_resizing_btn_group ._se_percentage');\n      context.resizing.alignMenu = resize_button.querySelector('.se-resizing-align-list');\n      context.resizing.alignMenuList = context.resizing.alignMenu.querySelectorAll('button');\n      context.resizing.alignButton = resize_button.querySelector('._se_resizing_align_button');\n      context.resizing.autoSizeButton = resize_button.querySelector('._se_resizing_btn_group ._se_auto_size');\n      context.resizing.captionButton = resize_button.querySelector('._se_resizing_caption_button');\n\n      /** add event listeners */\n      resize_div_container.addEventListener('mousedown', function (e) {\n        e.preventDefault();\n      });\n      resize_handles[0].addEventListener('mousedown', this.onMouseDown_resize_handle.bind(core));\n      resize_handles[1].addEventListener('mousedown', this.onMouseDown_resize_handle.bind(core));\n      resize_handles[2].addEventListener('mousedown', this.onMouseDown_resize_handle.bind(core));\n      resize_handles[3].addEventListener('mousedown', this.onMouseDown_resize_handle.bind(core));\n      resize_handles[4].addEventListener('mousedown', this.onMouseDown_resize_handle.bind(core));\n      resize_handles[5].addEventListener('mousedown', this.onMouseDown_resize_handle.bind(core));\n      resize_handles[6].addEventListener('mousedown', this.onMouseDown_resize_handle.bind(core));\n      resize_handles[7].addEventListener('mousedown', this.onMouseDown_resize_handle.bind(core));\n      resize_button.addEventListener('click', this.onClick_resizeButton.bind(core));\n\n      /** append html */\n      context.element.relative.appendChild(resize_div_container);\n      context.element.relative.appendChild(resize_button);\n\n      /** empty memory */\n      resize_div_container = null, resize_button = null, resize_handles = null;\n    },\n    /** resize controller, button (image, iframe, video) */\n    setController_resize: function (core) {\n      const resize_container = core.util.createElement('DIV');\n      resize_container.className = 'se-controller se-resizing-container';\n      resize_container.style.display = 'none';\n      resize_container.innerHTML = '' + '<div class=\"se-modal-resize\"></div>' + '<div class=\"se-resize-dot\">' + '<span class=\"tl\"></span>' + '<span class=\"tr\"></span>' + '<span class=\"bl\"></span>' + '<span class=\"br\"></span>' + '<span class=\"lw\"></span>' + '<span class=\"th\"></span>' + '<span class=\"rw\"></span>' + '<span class=\"bh\"></span>' + '<div class=\"se-resize-display\"></div>' + '</div>';\n      return resize_container;\n    },\n    setController_button: function (core) {\n      const lang = core.lang;\n      const icons = core.icons;\n      const resize_button = core.util.createElement(\"DIV\");\n      resize_button.className = \"se-controller se-controller-resizing\";\n      resize_button.innerHTML = '' + '<div class=\"se-arrow se-arrow-up\"></div>' + '<div class=\"se-btn-group _se_resizing_btn_group\">' + '<button type=\"button\" data-command=\"percent\" data-value=\"1\" class=\"se-tooltip _se_percentage\">' + '<span>100%</span>' + '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.controller.resize100 + '</span></span>' + '</button>' + '<button type=\"button\" data-command=\"percent\" data-value=\"0.75\" class=\"se-tooltip _se_percentage\">' + '<span>75%</span>' + '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.controller.resize75 + '</span></span>' + '</button>' + '<button type=\"button\" data-command=\"percent\" data-value=\"0.5\" class=\"se-tooltip _se_percentage\">' + '<span>50%</span>' + '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.controller.resize50 + '</span></span>' + '</button>' + '<button type=\"button\" data-command=\"auto\" class=\"se-btn se-tooltip _se_auto_size\">' + icons.auto_size + '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.controller.autoSize + '</span></span>' + '</button>' + '<button type=\"button\" data-command=\"rotate\" data-value=\"-90\" class=\"se-btn se-tooltip _se_rotation\">' + icons.rotate_left + '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.controller.rotateLeft + '</span></span>' + '</button>' + '<button type=\"button\" data-command=\"rotate\" data-value=\"90\" class=\"se-btn se-tooltip _se_rotation\">' + icons.rotate_right + '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.controller.rotateRight + '</span></span>' + '</button>' + '</div>' + '<div class=\"se-btn-group\" style=\"padding-top: 0;\">' + '<button type=\"button\" data-command=\"mirror\" data-value=\"h\" class=\"se-btn se-tooltip\">' + icons.mirror_horizontal + '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.controller.mirrorHorizontal + '</span></span>' + '</button>' + '<button type=\"button\" data-command=\"mirror\" data-value=\"v\" class=\"se-btn se-tooltip\">' + icons.mirror_vertical + '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.controller.mirrorVertical + '</span></span>' + '</button>' + '<button type=\"button\" data-command=\"onalign\" class=\"se-btn se-tooltip _se_resizing_align_button\">' + icons.align_justify + '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.toolbar.align + '</span></span>' + '</button>' + '<div class=\"se-btn-group-sub sun-editor-common se-list-layer se-resizing-align-list\">' + '<div class=\"se-list-inner\">' + '<ul class=\"se-list-basic\">' + '<li><button type=\"button\" class=\"se-btn-list se-tooltip\" data-command=\"align\" data-value=\"basic\">' + icons.align_justify + '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.dialogBox.basic + '</span></span>' + '</button></li>' + '<li><button type=\"button\" class=\"se-btn-list se-tooltip\" data-command=\"align\" data-value=\"left\">' + icons.align_left + '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.dialogBox.left + '</span></span>' + '</button></li>' + '<li><button type=\"button\" class=\"se-btn-list se-tooltip\" data-command=\"align\" data-value=\"center\">' + icons.align_center + '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.dialogBox.center + '</span></span>' + '</button></li>' + '<li><button type=\"button\" class=\"se-btn-list se-tooltip\" data-command=\"align\" data-value=\"right\">' + icons.align_right + '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.dialogBox.right + '</span></span>' + '</button></li>' + '</ul>' + '</div>' + '</div>' + '<button type=\"button\" data-command=\"caption\" class=\"se-btn se-tooltip _se_resizing_caption_button\">' + icons.caption + '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.dialogBox.caption + '</span></span>' + '</button>' + '<button type=\"button\" data-command=\"revert\" class=\"se-btn se-tooltip\">' + icons.revert + '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.dialogBox.revertButton + '</span></span>' + '</button>' + '<button type=\"button\" data-command=\"update\" class=\"se-btn se-tooltip\">' + icons.modify + '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.controller.edit + '</span></span>' + '</button>' + '<button type=\"button\" data-command=\"delete\" class=\"se-btn se-tooltip\">' + icons.delete + '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.controller.remove + '</span></span>' + '</button>' + '</div>';\n      return resize_button;\n    },\n    /**\n     * @description Gets the width size\n     * @param {Object} contextPlugin context object of plugin (core.context[plugin])\n     * @param {Element} element Target element\n     * @param {Element} cover Cover element (FIGURE)\n     * @param {Element} container Container element (DIV.se-component)\n     * @returns {String}\n     */\n    _module_getSizeX: function (contextPlugin, element, cover, container) {\n      if (!element) element = contextPlugin._element;\n      if (!cover) cover = contextPlugin._cover;\n      if (!container) container = contextPlugin._container;\n      if (!element) return '';\n      return !/%$/.test(element.style.width) ? element.style.width : (container && this.util.getNumber(container.style.width, 2) || 100) + '%';\n    },\n    /**\n     * @description Gets the height size\n     * @param {Object} contextPlugin context object of plugin (core.context[plugin])\n     * @param {Element} element Target element\n     * @param {Element} cover Cover element (FIGURE)\n     * @param {Element} container Container element (DIV.se-component)\n     * @returns {String}\n     */\n    _module_getSizeY: function (contextPlugin, element, cover, container) {\n      if (!element) element = contextPlugin._element;\n      if (!cover) cover = contextPlugin._cover;\n      if (!container) container = contextPlugin._container;\n      if (!container || !cover) return element && element.style.height || '';\n      return this.util.getNumber(cover.style.paddingBottom, 0) > 0 && !this.context.resizing._rotateVertical ? cover.style.height : !/%$/.test(element.style.height) || !/%$/.test(element.style.width) ? element.style.height : (container && this.util.getNumber(container.style.height, 2) || 100) + '%';\n    },\n    /**\n     * @description Called at the \"openModify\" to put the size of the current target into the size input element.\n     * @param {Object} contextPlugin context object of plugin (core.context[plugin])\n     * @param {Object} pluginObj Plugin object\n     */\n    _module_setModifyInputSize: function (contextPlugin, pluginObj) {\n      const percentageRotation = contextPlugin._onlyPercentage && this.context.resizing._rotateVertical;\n      contextPlugin.proportion.checked = contextPlugin._proportionChecked = contextPlugin._element.getAttribute('data-proportion') !== 'false';\n      let x = percentageRotation ? '' : this.plugins.resizing._module_getSizeX.call(this, contextPlugin);\n      if (x === contextPlugin._defaultSizeX) x = '';\n      if (contextPlugin._onlyPercentage) x = this.util.getNumber(x, 2);\n      contextPlugin.inputX.value = x;\n      pluginObj.setInputSize.call(this, 'x');\n      if (!contextPlugin._onlyPercentage) {\n        let y = percentageRotation ? '' : this.plugins.resizing._module_getSizeY.call(this, contextPlugin);\n        if (y === contextPlugin._defaultSizeY) y = '';\n        if (contextPlugin._onlyPercentage) y = this.util.getNumber(y, 2);\n        contextPlugin.inputY.value = y;\n      }\n      contextPlugin.inputX.disabled = percentageRotation ? true : false;\n      contextPlugin.inputY.disabled = percentageRotation ? true : false;\n      contextPlugin.proportion.disabled = percentageRotation ? true : false;\n      pluginObj.setRatio.call(this);\n    },\n    /**\n     * @description It is called in \"setInputSize\" (input tag keyupEvent), \n     * checks the value entered in the input tag, \n     * calculates the ratio, and sets the calculated value in the input tag of the opposite size.\n     * @param {Object} contextPlugin context object of plugin (core.context[plugin])\n     * @param {String} xy 'x': width, 'y': height\n     */\n    _module_setInputSize: function (contextPlugin, xy) {\n      if (contextPlugin._onlyPercentage) {\n        if (xy === 'x' && contextPlugin.inputX.value > 100) contextPlugin.inputX.value = 100;\n        return;\n      }\n      if (contextPlugin.proportion.checked && contextPlugin._ratio && /\\d/.test(contextPlugin.inputX.value) && /\\d/.test(contextPlugin.inputY.value)) {\n        const xUnit = contextPlugin.inputX.value.replace(/\\d+|\\./g, '') || contextPlugin.sizeUnit;\n        const yUnit = contextPlugin.inputY.value.replace(/\\d+|\\./g, '') || contextPlugin.sizeUnit;\n        if (xUnit !== yUnit) return;\n        const dec = xUnit === '%' ? 2 : 0;\n        if (xy === 'x') {\n          contextPlugin.inputY.value = this.util.getNumber(contextPlugin._ratioY * this.util.getNumber(contextPlugin.inputX.value, dec), dec) + yUnit;\n        } else {\n          contextPlugin.inputX.value = this.util.getNumber(contextPlugin._ratioX * this.util.getNumber(contextPlugin.inputY.value, dec), dec) + xUnit;\n        }\n      }\n    },\n    /**\n     * @description It is called in \"setRatio\" (input and proportionCheck tags changeEvent), \n     * checks the value of the input tag, calculates the ratio, and resets it in the input tag.\n     * @param {Object} contextPlugin context object of plugin (core.context[plugin])\n     */\n    _module_setRatio: function (contextPlugin) {\n      const xValue = contextPlugin.inputX.value;\n      const yValue = contextPlugin.inputY.value;\n      if (contextPlugin.proportion.checked && /\\d+/.test(xValue) && /\\d+/.test(yValue)) {\n        const xUnit = xValue.replace(/\\d+|\\./g, '') || contextPlugin.sizeUnit;\n        const yUnit = yValue.replace(/\\d+|\\./g, '') || contextPlugin.sizeUnit;\n        if (xUnit !== yUnit) {\n          contextPlugin._ratio = false;\n        } else if (!contextPlugin._ratio) {\n          const x = this.util.getNumber(xValue, 0);\n          const y = this.util.getNumber(yValue, 0);\n          contextPlugin._ratio = true;\n          contextPlugin._ratioX = x / y;\n          contextPlugin._ratioY = y / x;\n        }\n      } else {\n        contextPlugin._ratio = false;\n      }\n    },\n    /**\n     * @description Revert size of element to origin size (plugin._origin_w, plugin._origin_h)\n     * @param {Object} contextPlugin context object of plugin (core.context[plugin])\n     */\n    _module_sizeRevert: function (contextPlugin) {\n      if (contextPlugin._onlyPercentage) {\n        contextPlugin.inputX.value = contextPlugin._origin_w > 100 ? 100 : contextPlugin._origin_w;\n      } else {\n        contextPlugin.inputX.value = contextPlugin._origin_w;\n        contextPlugin.inputY.value = contextPlugin._origin_h;\n      }\n    },\n    /**\n     * @description Save the size data (element.setAttribute(\"data-size\"))\n     * Used at the \"setSize\" method\n     * @param {Object} contextPlugin context object of plugin (core.context[plugin])\n     */\n    _module_saveCurrentSize: function (contextPlugin) {\n      const x = this.plugins.resizing._module_getSizeX.call(this, contextPlugin);\n      const y = this.plugins.resizing._module_getSizeY.call(this, contextPlugin);\n      contextPlugin._element.setAttribute('data-size', x + ',' + y);\n      if (!!contextPlugin._videoRatio) contextPlugin._videoRatio = y;\n    },\n    /**\n     * @description Call the resizing module\n     * @param {Element} targetElement Resizing target element\n     * @param {string} plugin Plugin name\n     * @returns {Object} Size of resizing div {w, h, t, l}\n     */\n    call_controller_resize: function (targetElement, plugin) {\n      const contextResizing = this.context.resizing;\n      const contextPlugin = this.context[plugin];\n      contextResizing._resize_plugin = plugin;\n      const resizeContainer = contextResizing.resizeContainer;\n      const resizeDiv = contextResizing.resizeDiv;\n      const offset = this.util.getOffset(targetElement, this.context.element.wysiwygFrame);\n      const isVertical = contextResizing._rotateVertical = /^(90|270)$/.test(Math.abs(targetElement.getAttribute('data-rotate')).toString());\n      const w = isVertical ? targetElement.offsetHeight : targetElement.offsetWidth;\n      const h = isVertical ? targetElement.offsetWidth : targetElement.offsetHeight;\n      const t = offset.top;\n      const l = offset.left - this.context.element.wysiwygFrame.scrollLeft;\n      resizeContainer.style.top = t + 'px';\n      resizeContainer.style.left = l + 'px';\n      resizeContainer.style.width = w + 'px';\n      resizeContainer.style.height = h + 'px';\n      resizeDiv.style.top = '0px';\n      resizeDiv.style.left = '0px';\n      resizeDiv.style.width = w + 'px';\n      resizeDiv.style.height = h + 'px';\n      let align = targetElement.getAttribute('data-align') || 'basic';\n      align = align === 'none' ? 'basic' : align;\n\n      // text\n      const container = this.util.getParentElement(targetElement, this.util.isComponent);\n      const cover = this.util.getParentElement(targetElement, 'FIGURE');\n      const displayX = this.plugins.resizing._module_getSizeX.call(this, contextPlugin, targetElement, cover, container) || 'auto';\n      const displayY = contextPlugin._onlyPercentage && plugin === 'image' ? '' : ', ' + (this.plugins.resizing._module_getSizeY.call(this, contextPlugin, targetElement, cover, container) || 'auto');\n      this.util.changeTxt(contextResizing.resizeDisplay, this.lang.dialogBox[align] + ' (' + displayX + displayY + ')');\n\n      // resizing display\n      contextResizing.resizeButtonGroup.style.display = contextPlugin._resizing ? '' : 'none';\n      const resizeDotShow = contextPlugin._resizing && !contextPlugin._resizeDotHide && !contextPlugin._onlyPercentage ? 'flex' : 'none';\n      const resizeHandles = contextResizing.resizeHandles;\n      for (let i = 0, len = resizeHandles.length; i < len; i++) {\n        resizeHandles[i].style.display = resizeDotShow;\n      }\n      if (contextPlugin._resizing) {\n        const rotations = contextResizing.rotationButtons;\n        rotations[0].style.display = rotations[1].style.display = contextPlugin._rotation ? '' : 'none';\n      }\n\n      // align icon\n      if (contextPlugin._alignHide) {\n        contextResizing.alignButton.style.display = 'none';\n      } else {\n        contextResizing.alignButton.style.display = '';\n        const alignList = contextResizing.alignMenuList;\n        this.util.changeElement(contextResizing.alignButton.firstElementChild, contextResizing.alignIcons[align]);\n        for (let i = 0, len = alignList.length; i < len; i++) {\n          if (alignList[i].getAttribute('data-value') === align) this.util.addClass(alignList[i], 'on');else this.util.removeClass(alignList[i], 'on');\n        }\n      }\n\n      // percentage active\n      const pButtons = contextResizing.percentageButtons;\n      const value = /%$/.test(targetElement.style.width) && /%$/.test(container.style.width) ? this.util.getNumber(container.style.width, 0) / 100 + '' : '';\n      for (let i = 0, len = pButtons.length; i < len; i++) {\n        if (pButtons[i].getAttribute('data-value') === value) {\n          this.util.addClass(pButtons[i], 'active');\n        } else {\n          this.util.removeClass(pButtons[i], 'active');\n        }\n      }\n\n      // caption display, active\n      if (!contextPlugin._captionShow) {\n        contextResizing.captionButton.style.display = 'none';\n      } else {\n        contextResizing.captionButton.style.display = '';\n        if (this.util.getChildElement(targetElement.parentNode, 'figcaption')) {\n          this.util.addClass(contextResizing.captionButton, 'active');\n          contextPlugin._captionChecked = true;\n        } else {\n          this.util.removeClass(contextResizing.captionButton, 'active');\n          contextPlugin._captionChecked = false;\n        }\n      }\n      resizeContainer.style.display = 'block';\n      const addOffset = {\n        left: 0,\n        top: 50\n      };\n      if (this.options.iframe) {\n        addOffset.left -= this.context.element.wysiwygFrame.parentElement.offsetLeft;\n        addOffset.top -= this.context.element.wysiwygFrame.parentElement.offsetTop;\n      }\n      this.setControllerPosition(contextResizing.resizeButton, resizeContainer, 'bottom', addOffset);\n      this.controllersOn(resizeContainer, contextResizing.resizeButton, this.util.setDisabledButtons.bind(this.util, false, this.resizingDisabledButtons), targetElement, plugin);\n      this.util.setDisabledButtons(true, this.resizingDisabledButtons);\n      contextResizing._resize_w = w;\n      contextResizing._resize_h = h;\n      const originSize = (targetElement.getAttribute('origin-size') || '').split(',');\n      contextResizing._origin_w = originSize[0] || targetElement.naturalWidth;\n      contextResizing._origin_h = originSize[1] || targetElement.naturalHeight;\n      return {\n        w: w,\n        h: h,\n        t: t,\n        l: l\n      };\n    },\n    _closeAlignMenu: null,\n    /**\n     * @description Open align submenu of module\n     */\n    openAlignMenu: function () {\n      const alignButton = this.context.resizing.alignButton;\n      this.util.addClass(alignButton, 'on');\n      this.context.resizing.alignMenu.style.top = alignButton.offsetTop + alignButton.offsetHeight + 'px';\n      this.context.resizing.alignMenu.style.left = alignButton.offsetLeft - alignButton.offsetWidth / 2 + 'px';\n      this.context.resizing.alignMenu.style.display = 'block';\n      this.plugins.resizing._closeAlignMenu = function () {\n        this.util.removeClass(this.context.resizing.alignButton, 'on');\n        this.context.resizing.alignMenu.style.display = 'none';\n        this.removeDocEvent('click', this.plugins.resizing._closeAlignMenu);\n        this.plugins.resizing._closeAlignMenu = null;\n      }.bind(this);\n      this.addDocEvent('click', this.plugins.resizing._closeAlignMenu);\n    },\n    /**\n     * @description Click event of resizing toolbar\n     * Performs the action of the clicked toolbar button.\n     * @param {MouseEvent} e Event object\n     */\n    onClick_resizeButton: function (e) {\n      e.stopPropagation();\n      const target = e.target;\n      const command = target.getAttribute('data-command') || target.parentNode.getAttribute('data-command');\n      if (!command) return;\n      const value = target.getAttribute('data-value') || target.parentNode.getAttribute('data-value');\n      const pluginName = this.context.resizing._resize_plugin;\n      const currentContext = this.context[pluginName];\n      const contextEl = currentContext._element;\n      const currentModule = this.plugins[pluginName];\n      e.preventDefault();\n      if (typeof this.plugins.resizing._closeAlignMenu === 'function') {\n        this.plugins.resizing._closeAlignMenu();\n        if (command === 'onalign') return;\n      }\n      switch (command) {\n        case 'auto':\n          this.plugins.resizing.resetTransform.call(this, contextEl);\n          currentModule.setAutoSize.call(this);\n          this.selectComponent(contextEl, pluginName);\n          break;\n        case 'percent':\n          let percentY = this.plugins.resizing._module_getSizeY.call(this, currentContext);\n          if (this.context.resizing._rotateVertical) {\n            const percentage = contextEl.getAttribute('data-percentage');\n            if (percentage) percentY = percentage.split(',')[1];\n          }\n          this.plugins.resizing.resetTransform.call(this, contextEl);\n          currentModule.setPercentSize.call(this, value * 100, this.util.getNumber(percentY, 0) === null || !/%$/.test(percentY) ? '' : percentY);\n          this.selectComponent(contextEl, pluginName);\n          break;\n        case 'mirror':\n          const r = contextEl.getAttribute('data-rotate') || '0';\n          let x = contextEl.getAttribute('data-rotateX') || '';\n          let y = contextEl.getAttribute('data-rotateY') || '';\n          if (value === 'h' && !this.context.resizing._rotateVertical || value === 'v' && this.context.resizing._rotateVertical) {\n            y = y ? '' : '180';\n          } else {\n            x = x ? '' : '180';\n          }\n          contextEl.setAttribute('data-rotateX', x);\n          contextEl.setAttribute('data-rotateY', y);\n          this.plugins.resizing._setTransForm(contextEl, r, x, y);\n          break;\n        case 'rotate':\n          const contextResizing = this.context.resizing;\n          const slope = contextEl.getAttribute('data-rotate') * 1 + value * 1;\n          const deg = this._w.Math.abs(slope) >= 360 ? 0 : slope;\n          contextEl.setAttribute('data-rotate', deg);\n          contextResizing._rotateVertical = /^(90|270)$/.test(this._w.Math.abs(deg).toString());\n          this.plugins.resizing.setTransformSize.call(this, contextEl, null, null);\n          this.selectComponent(contextEl, pluginName);\n          break;\n        case 'onalign':\n          this.plugins.resizing.openAlignMenu.call(this);\n          return;\n        case 'align':\n          const alignValue = value === 'basic' ? 'none' : value;\n          currentModule.setAlign.call(this, alignValue, null, null, null);\n          this.selectComponent(contextEl, pluginName);\n          break;\n        case 'caption':\n          const caption = !currentContext._captionChecked;\n          currentModule.openModify.call(this, true);\n          currentContext._captionChecked = currentContext.captionCheckEl.checked = caption;\n          currentModule.update_image.call(this, false, false, false);\n          if (caption) {\n            const captionText = this.util.getChildElement(currentContext._caption, function (current) {\n              return current.nodeType === 3;\n            });\n            if (!captionText) {\n              currentContext._caption.focus();\n            } else {\n              this.setRange(captionText, 0, captionText, captionText.textContent.length);\n            }\n            this.controllersOff();\n          } else {\n            this.selectComponent(contextEl, pluginName);\n            currentModule.openModify.call(this, true);\n          }\n          break;\n        case 'revert':\n          currentModule.setOriginSize.call(this);\n          this.selectComponent(contextEl, pluginName);\n          break;\n        case 'update':\n          currentModule.openModify.call(this);\n          this.controllersOff();\n          break;\n        case 'delete':\n          currentModule.destroy.call(this);\n          break;\n      }\n\n      // history stack\n      this.history.push(false);\n    },\n    /**\n     * @description Initialize the transform style (rotation) of the element.\n     * @param {Element} element Target element\n     */\n    resetTransform: function (element) {\n      const size = (element.getAttribute('data-size') || element.getAttribute('data-origin') || '').split(',');\n      this.context.resizing._rotateVertical = false;\n      element.style.maxWidth = '';\n      element.style.transform = '';\n      element.style.transformOrigin = '';\n      element.setAttribute('data-rotate', '');\n      element.setAttribute('data-rotateX', '');\n      element.setAttribute('data-rotateY', '');\n      this.plugins[this.context.resizing._resize_plugin].setSize.call(this, size[0] ? size[0] : 'auto', size[1] ? size[1] : '', true);\n    },\n    /**\n     * @description Set the transform style (rotation) of the element.\n     * @param {Element} element Target element\n     * @param {Number|null} width Element's width size\n     * @param {Number|null} height Element's height size\n     */\n    setTransformSize: function (element, width, height) {\n      let percentage = element.getAttribute('data-percentage');\n      const isVertical = this.context.resizing._rotateVertical;\n      const deg = element.getAttribute('data-rotate') * 1;\n      let transOrigin = '';\n      if (percentage && !isVertical) {\n        percentage = percentage.split(',');\n        if (percentage[0] === 'auto' && percentage[1] === 'auto') {\n          this.plugins[this.context.resizing._resize_plugin].setAutoSize.call(this);\n        } else {\n          this.plugins[this.context.resizing._resize_plugin].setPercentSize.call(this, percentage[0], percentage[1]);\n        }\n      } else {\n        const cover = this.util.getParentElement(element, 'FIGURE');\n        const offsetW = width || element.offsetWidth;\n        const offsetH = height || element.offsetHeight;\n        const w = (isVertical ? offsetH : offsetW) + 'px';\n        const h = (isVertical ? offsetW : offsetH) + 'px';\n        this.plugins[this.context.resizing._resize_plugin].cancelPercentAttr.call(this);\n        this.plugins[this.context.resizing._resize_plugin].setSize.call(this, offsetW + 'px', offsetH + 'px', true);\n        cover.style.width = w;\n        cover.style.height = !!this.context[this.context.resizing._resize_plugin]._caption ? '' : h;\n        if (isVertical) {\n          let transW = offsetW / 2 + 'px ' + offsetW / 2 + 'px 0';\n          let transH = offsetH / 2 + 'px ' + offsetH / 2 + 'px 0';\n          transOrigin = deg === 90 || deg === -270 ? transH : transW;\n        }\n      }\n      element.style.transformOrigin = transOrigin;\n      this.plugins.resizing._setTransForm(element, deg.toString(), element.getAttribute('data-rotateX') || '', element.getAttribute('data-rotateY') || '');\n      if (isVertical) element.style.maxWidth = 'none';else element.style.maxWidth = '';\n      this.plugins.resizing.setCaptionPosition.call(this, element);\n    },\n    _setTransForm: function (element, r, x, y) {\n      let width = (element.offsetWidth - element.offsetHeight) * (/-/.test(r) ? 1 : -1);\n      let translate = '';\n      if (/[1-9]/.test(r) && (x || y)) {\n        translate = x ? 'Y' : 'X';\n        switch (r) {\n          case '90':\n            translate = x && y ? 'X' : y ? translate : '';\n            break;\n          case '270':\n            width *= -1;\n            translate = x && y ? 'Y' : x ? translate : '';\n            break;\n          case '-90':\n            translate = x && y ? 'Y' : x ? translate : '';\n            break;\n          case '-270':\n            width *= -1;\n            translate = x && y ? 'X' : y ? translate : '';\n            break;\n          default:\n            translate = '';\n        }\n      }\n      if (r % 180 === 0) {\n        element.style.maxWidth = '';\n      }\n      element.style.transform = 'rotate(' + r + 'deg)' + (x ? ' rotateX(' + x + 'deg)' : '') + (y ? ' rotateY(' + y + 'deg)' : '') + (translate ? ' translate' + translate + '(' + width + 'px)' : '');\n    },\n    /**\n     * @description The position of the caption is set automatically.\n     * @param {Element} element Target element (not caption element)\n     */\n    setCaptionPosition: function (element) {\n      const figcaption = this.util.getChildElement(this.util.getParentElement(element, 'FIGURE'), 'FIGCAPTION');\n      if (figcaption) {\n        figcaption.style.marginTop = (this.context.resizing._rotateVertical ? element.offsetWidth - element.offsetHeight : 0) + 'px';\n      }\n    },\n    /**\n     * @description Mouse down event of resize handles\n     * @param {MouseEvent} e Event object \n     */\n    onMouseDown_resize_handle: function (e) {\n      e.stopPropagation();\n      e.preventDefault();\n      const contextResizing = this.context.resizing;\n      const direction = contextResizing._resize_direction = e.target.classList[0];\n      contextResizing._resizeClientX = e.clientX;\n      contextResizing._resizeClientY = e.clientY;\n      this.context.element.resizeBackground.style.display = 'block';\n      contextResizing.resizeButton.style.display = 'none';\n      contextResizing.resizeDiv.style.float = /l/.test(direction) ? 'right' : /r/.test(direction) ? 'left' : 'none';\n      const closureFunc_bind = function closureFunc(e) {\n        if (e.type === 'keydown' && e.keyCode !== 27) return;\n        const change = contextResizing._isChange;\n        contextResizing._isChange = false;\n        this.removeDocEvent('mousemove', resizing_element_bind);\n        this.removeDocEvent('mouseup', closureFunc_bind);\n        this.removeDocEvent('keydown', closureFunc_bind);\n        if (e.type === 'keydown') {\n          this.controllersOff();\n          this.context.element.resizeBackground.style.display = 'none';\n          this.plugins[this.context.resizing._resize_plugin].init.call(this);\n        } else {\n          // element resize\n          this.plugins.resizing.cancel_controller_resize.call(this, direction);\n          // history stack\n          if (change) this.history.push(false);\n        }\n      }.bind(this);\n      const resizing_element_bind = this.plugins.resizing.resizing_element.bind(this, contextResizing, direction, this.context[contextResizing._resize_plugin]);\n      this.addDocEvent('mousemove', resizing_element_bind);\n      this.addDocEvent('mouseup', closureFunc_bind);\n      this.addDocEvent('keydown', closureFunc_bind);\n    },\n    /**\n     * @description Mouse move event after call \"onMouseDown_resize_handle\" of resize handles\n     * The size of the module's \"div\" is adjusted according to the mouse move event.\n     * @param {Object} contextResizing \"core.context.resizing\" object (binding argument)\n     * @param {String} direction Direction (\"tl\", \"tr\", \"bl\", \"br\", \"lw\", \"th\", \"rw\", \"bh\") (binding argument)\n     * @param {Object} plugin \"core.context[currentPlugin]\" object (binding argument)\n     * @param {MouseEvent} e Event object\n     */\n    resizing_element: function (contextResizing, direction, plugin, e) {\n      const clientX = e.clientX;\n      const clientY = e.clientY;\n      let resultW = plugin._element_w;\n      let resultH = plugin._element_h;\n      const w = plugin._element_w + (/r/.test(direction) ? clientX - contextResizing._resizeClientX : contextResizing._resizeClientX - clientX);\n      const h = plugin._element_h + (/b/.test(direction) ? clientY - contextResizing._resizeClientY : contextResizing._resizeClientY - clientY);\n      const wh = plugin._element_h / plugin._element_w * w;\n      if (/t/.test(direction)) contextResizing.resizeDiv.style.top = plugin._element_h - (/h/.test(direction) ? h : wh) + 'px';\n      if (/l/.test(direction)) contextResizing.resizeDiv.style.left = plugin._element_w - w + 'px';\n      if (/r|l/.test(direction)) {\n        contextResizing.resizeDiv.style.width = w + 'px';\n        resultW = w;\n      }\n      if (/^(t|b)[^h]$/.test(direction)) {\n        contextResizing.resizeDiv.style.height = wh + 'px';\n        resultH = wh;\n      } else if (/^(t|b)h$/.test(direction)) {\n        contextResizing.resizeDiv.style.height = h + 'px';\n        resultH = h;\n      }\n      contextResizing._resize_w = resultW;\n      contextResizing._resize_h = resultH;\n      this.util.changeTxt(contextResizing.resizeDisplay, this._w.Math.round(resultW) + ' x ' + this._w.Math.round(resultH));\n      contextResizing._isChange = true;\n    },\n    /**\n     * @description Resize the element to the size of the \"div\" adjusted in the \"resizing_element\" method.\n     * Called at the mouse-up event registered in \"onMouseDown_resize_handle\".\n     * @param {String} direction Direction (\"tl\", \"tr\", \"bl\", \"br\", \"lw\", \"th\", \"rw\", \"bh\")\n     */\n    cancel_controller_resize: function (direction) {\n      const isVertical = this.context.resizing._rotateVertical;\n      this.controllersOff();\n      this.context.element.resizeBackground.style.display = 'none';\n      let w = this._w.Math.round(isVertical ? this.context.resizing._resize_h : this.context.resizing._resize_w);\n      let h = this._w.Math.round(isVertical ? this.context.resizing._resize_w : this.context.resizing._resize_h);\n      if (!isVertical && !/%$/.test(w)) {\n        const padding = 16;\n        const limit = this.context.element.wysiwygFrame.clientWidth - padding * 2 - 2;\n        if (this.util.getNumber(w, 0) > limit) {\n          h = this._w.Math.round(h / w * limit);\n          w = limit;\n        }\n      }\n      const pluginName = this.context.resizing._resize_plugin;\n      this.plugins[pluginName].setSize.call(this, w, h, false, direction);\n      if (isVertical) this.plugins.resizing.setTransformSize.call(this, this.context[this.context.resizing._resize_plugin]._element, w, h);\n      this.selectComponent(this.context[pluginName]._element, pluginName);\n    }\n  };\n  if (typeof noGlobal === typeof undefined) {\n    if (!window.SUNEDITOR_MODULES) {\n      Object.defineProperty(window, 'SUNEDITOR_MODULES', {\n        enumerable: true,\n        writable: false,\n        configurable: false,\n        value: {}\n      });\n    }\n    Object.defineProperty(window.SUNEDITOR_MODULES, 'resizing', {\n      enumerable: true,\n      writable: false,\n      configurable: false,\n      value: resizing\n    });\n  }\n  return resizing;\n});","map":{"version":3,"names":["global","factory","module","exports","document","w","Error","window","noGlobal","resizing","name","add","core","icons","context","_resizeClientX","_resizeClientY","_resize_plugin","_resize_w","_resize_h","_origin_w","_origin_h","_rotateVertical","_resize_direction","_move_path","_isChange","alignIcons","basic","align_justify","left","align_left","right","align_right","center","align_center","resize_div_container","setController_resize","resizeContainer","resizeDiv","querySelector","resizeDot","resizeDisplay","resize_button","setController_button","resizeButton","resize_handles","resizeHandles","querySelectorAll","resizeButtonGroup","rotationButtons","percentageButtons","alignMenu","alignMenuList","alignButton","autoSizeButton","captionButton","addEventListener","e","preventDefault","onMouseDown_resize_handle","bind","onClick_resizeButton","element","relative","appendChild","resize_container","util","createElement","className","style","display","innerHTML","lang","controller","resize100","resize75","resize50","auto_size","autoSize","rotate_left","rotateLeft","rotate_right","rotateRight","mirror_horizontal","mirrorHorizontal","mirror_vertical","mirrorVertical","toolbar","align","dialogBox","caption","revert","revertButton","modify","edit","delete","remove","_module_getSizeX","contextPlugin","cover","container","_element","_cover","_container","test","width","getNumber","_module_getSizeY","height","paddingBottom","_module_setModifyInputSize","pluginObj","percentageRotation","_onlyPercentage","proportion","checked","_proportionChecked","getAttribute","x","plugins","call","_defaultSizeX","inputX","value","setInputSize","y","_defaultSizeY","inputY","disabled","setRatio","_module_setInputSize","xy","_ratio","xUnit","replace","sizeUnit","yUnit","dec","_ratioY","_ratioX","_module_setRatio","xValue","yValue","_module_sizeRevert","_module_saveCurrentSize","setAttribute","_videoRatio","call_controller_resize","targetElement","plugin","contextResizing","offset","getOffset","wysiwygFrame","isVertical","Math","abs","toString","offsetHeight","offsetWidth","h","t","top","l","scrollLeft","getParentElement","isComponent","displayX","displayY","changeTxt","_resizing","resizeDotShow","_resizeDotHide","i","len","length","rotations","_rotation","_alignHide","alignList","changeElement","firstElementChild","addClass","removeClass","pButtons","_captionShow","getChildElement","parentNode","_captionChecked","addOffset","options","iframe","parentElement","offsetLeft","offsetTop","setControllerPosition","controllersOn","setDisabledButtons","resizingDisabledButtons","originSize","split","naturalWidth","naturalHeight","_closeAlignMenu","openAlignMenu","removeDocEvent","addDocEvent","stopPropagation","target","command","pluginName","currentContext","contextEl","currentModule","resetTransform","setAutoSize","selectComponent","percentY","percentage","setPercentSize","r","_setTransForm","slope","deg","_w","setTransformSize","alignValue","setAlign","openModify","captionCheckEl","update_image","captionText","_caption","current","nodeType","focus","setRange","textContent","controllersOff","setOriginSize","destroy","history","push","size","maxWidth","transform","transformOrigin","setSize","transOrigin","offsetW","offsetH","cancelPercentAttr","transW","transH","setCaptionPosition","translate","figcaption","marginTop","direction","classList","clientX","clientY","resizeBackground","float","closureFunc_bind","closureFunc","type","keyCode","change","resizing_element_bind","init","cancel_controller_resize","resizing_element","resultW","_element_w","resultH","_element_h","wh","round","padding","limit","clientWidth","undefined","SUNEDITOR_MODULES","Object","defineProperty","enumerable","writable","configurable"],"sources":["E:/Programming/React/New folder (2)/dynamicArt/dynamic-article/node_modules/suneditor/src/plugins/modules/resizing.js"],"sourcesContent":["/*\n * wysiwyg web editor\n *\n * suneditor.js\n * Copyright 2017 JiHong Lee.\n * MIT license.\n */\n'use strict';\n\n(function (global, factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        module.exports = global.document ?\n            factory(global, true) :\n            function (w) {\n                if (!w.document) {\n                    throw new Error('SUNEDITOR_MODULES a window with a document');\n                }\n                return factory(w);\n            };\n    } else {\n        factory(global);\n    }\n}(typeof window !== 'undefined' ? window : this, function (window, noGlobal) {\n    const resizing = {\n        name: 'resizing',\n        /**\n         * @description Constructor\n         * Require context properties when resizing module\n            inputX: Element,\n            inputY: Element,\n            _container: null,\n            _cover: null,\n            _element: null,\n            _element_w: 1,\n            _element_h: 1,\n            _element_l: 0,\n            _element_t: 0,\n            _defaultSizeX: 'auto',\n            _defaultSizeY: 'auto',\n            _origin_w: core.options.imageWidth === 'auto' ? '' : core.options.imageWidth,\n            _origin_h: core.options.imageHeight === 'auto' ? '' : core.options.imageHeight,\n            _proportionChecked: true,\n            // -- select function --\n            _resizing: core.options.imageResizing,\n            _resizeDotHide: !core.options.imageHeightShow,\n            _rotation: core.options.imageRotation,\n            _onlyPercentage: core.options.imageSizeOnlyPercentage,\n            _ratio: false,\n            _ratioX: 1,\n            _ratioY: 1\n            _captionShow: true,\n            // -- when used caption (_captionShow: true) --\n            _caption: null,\n            _captionChecked: false,\n            captionCheckEl: null,\n         * @param {Object} core Core object \n         */\n        add: function (core) {\n            const icons = core.icons;\n            const context = core.context;\n            context.resizing = {\n                _resizeClientX: 0,\n                _resizeClientY: 0,\n                _resize_plugin: '',\n                _resize_w: 0,\n                _resize_h: 0,\n                _origin_w: 0,\n                _origin_h: 0,\n                _rotateVertical: false,\n                _resize_direction: '',\n                _move_path: null,\n                _isChange: false,\n                alignIcons: {\n                    basic: icons.align_justify,\n                    left: icons.align_left,\n                    right: icons.align_right,\n                    center: icons.align_center\n                }\n            };\n    \n            /** resize controller, button */\n            let resize_div_container = this.setController_resize(core);\n            context.resizing.resizeContainer = resize_div_container;\n    \n            context.resizing.resizeDiv = resize_div_container.querySelector('.se-modal-resize');\n            context.resizing.resizeDot = resize_div_container.querySelector('.se-resize-dot');\n            context.resizing.resizeDisplay = resize_div_container.querySelector('.se-resize-display');\n    \n            let resize_button = this.setController_button(core);\n            context.resizing.resizeButton = resize_button;\n    \n            let resize_handles = context.resizing.resizeHandles = context.resizing.resizeDot.querySelectorAll('span');\n            context.resizing.resizeButtonGroup = resize_button.querySelector('._se_resizing_btn_group');\n            context.resizing.rotationButtons = resize_button.querySelectorAll('._se_resizing_btn_group ._se_rotation');\n            context.resizing.percentageButtons = resize_button.querySelectorAll('._se_resizing_btn_group ._se_percentage');\n    \n            context.resizing.alignMenu = resize_button.querySelector('.se-resizing-align-list');\n            context.resizing.alignMenuList = context.resizing.alignMenu.querySelectorAll('button');\n    \n            context.resizing.alignButton = resize_button.querySelector('._se_resizing_align_button');\n            context.resizing.autoSizeButton = resize_button.querySelector('._se_resizing_btn_group ._se_auto_size');\n            context.resizing.captionButton = resize_button.querySelector('._se_resizing_caption_button');\n    \n            /** add event listeners */\n            resize_div_container.addEventListener('mousedown', function (e) { e.preventDefault(); });\n            resize_handles[0].addEventListener('mousedown', this.onMouseDown_resize_handle.bind(core));\n            resize_handles[1].addEventListener('mousedown', this.onMouseDown_resize_handle.bind(core));\n            resize_handles[2].addEventListener('mousedown', this.onMouseDown_resize_handle.bind(core));\n            resize_handles[3].addEventListener('mousedown', this.onMouseDown_resize_handle.bind(core));\n            resize_handles[4].addEventListener('mousedown', this.onMouseDown_resize_handle.bind(core));\n            resize_handles[5].addEventListener('mousedown', this.onMouseDown_resize_handle.bind(core));\n            resize_handles[6].addEventListener('mousedown', this.onMouseDown_resize_handle.bind(core));\n            resize_handles[7].addEventListener('mousedown', this.onMouseDown_resize_handle.bind(core));\n            resize_button.addEventListener('click', this.onClick_resizeButton.bind(core));\n    \n            /** append html */\n            context.element.relative.appendChild(resize_div_container);\n            context.element.relative.appendChild(resize_button);\n    \n            /** empty memory */\n            resize_div_container = null, resize_button = null, resize_handles = null;\n        },\n    \n        /** resize controller, button (image, iframe, video) */\n        setController_resize: function (core) {\n            const resize_container = core.util.createElement('DIV');\n            \n            resize_container.className = 'se-controller se-resizing-container';\n            resize_container.style.display = 'none';\n            resize_container.innerHTML = '' +\n                '<div class=\"se-modal-resize\"></div>' +\n                '<div class=\"se-resize-dot\">' +\n                    '<span class=\"tl\"></span>' +\n                    '<span class=\"tr\"></span>' +\n                    '<span class=\"bl\"></span>' +\n                    '<span class=\"br\"></span>' +\n                    '<span class=\"lw\"></span>' +\n                    '<span class=\"th\"></span>' +\n                    '<span class=\"rw\"></span>' +\n                    '<span class=\"bh\"></span>' +\n                    '<div class=\"se-resize-display\"></div>' +\n                '</div>';\n    \n            return resize_container;\n        },\n    \n        setController_button: function (core) {\n            const lang = core.lang;\n            const icons = core.icons;\n            const resize_button = core.util.createElement(\"DIV\");\n    \n            resize_button.className = \"se-controller se-controller-resizing\";\n            resize_button.innerHTML = '' +\n                '<div class=\"se-arrow se-arrow-up\"></div>' +\n                '<div class=\"se-btn-group _se_resizing_btn_group\">' +\n                    '<button type=\"button\" data-command=\"percent\" data-value=\"1\" class=\"se-tooltip _se_percentage\">' +\n                        '<span>100%</span>' +\n                        '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.controller.resize100 + '</span></span>' +\n                    '</button>' +\n                    '<button type=\"button\" data-command=\"percent\" data-value=\"0.75\" class=\"se-tooltip _se_percentage\">' +\n                        '<span>75%</span>' +\n                        '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.controller.resize75 + '</span></span>' +\n                    '</button>' +\n                    '<button type=\"button\" data-command=\"percent\" data-value=\"0.5\" class=\"se-tooltip _se_percentage\">' +\n                        '<span>50%</span>' +\n                        '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.controller.resize50 + '</span></span>' +\n                    '</button>' +\n                    '<button type=\"button\" data-command=\"auto\" class=\"se-btn se-tooltip _se_auto_size\">' +\n                        icons.auto_size +\n                        '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.controller.autoSize + '</span></span>' +\n                    '</button>' +\n                    '<button type=\"button\" data-command=\"rotate\" data-value=\"-90\" class=\"se-btn se-tooltip _se_rotation\">' +\n                        icons.rotate_left +\n                        '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.controller.rotateLeft + '</span></span>' +\n                    '</button>' +\n                    '<button type=\"button\" data-command=\"rotate\" data-value=\"90\" class=\"se-btn se-tooltip _se_rotation\">' +\n                        icons.rotate_right +\n                        '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.controller.rotateRight + '</span></span>' +\n                    '</button>' +\n                '</div>' +\n                '<div class=\"se-btn-group\" style=\"padding-top: 0;\">' +\n                    '<button type=\"button\" data-command=\"mirror\" data-value=\"h\" class=\"se-btn se-tooltip\">' +\n                        icons.mirror_horizontal +\n                        '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.controller.mirrorHorizontal + '</span></span>' +\n                    '</button>' +\n                    '<button type=\"button\" data-command=\"mirror\" data-value=\"v\" class=\"se-btn se-tooltip\">' +\n                        icons.mirror_vertical +\n                        '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.controller.mirrorVertical + '</span></span>' +\n                    '</button>' +\n                    '<button type=\"button\" data-command=\"onalign\" class=\"se-btn se-tooltip _se_resizing_align_button\">' +\n                        icons.align_justify +\n                        '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.toolbar.align + '</span></span>' +\n                    '</button>' +\n                    '<div class=\"se-btn-group-sub sun-editor-common se-list-layer se-resizing-align-list\">' +\n                        '<div class=\"se-list-inner\">' +\n                            '<ul class=\"se-list-basic\">' +\n                                '<li><button type=\"button\" class=\"se-btn-list se-tooltip\" data-command=\"align\" data-value=\"basic\">' +\n                                    icons.align_justify +\n                                    '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.dialogBox.basic + '</span></span>' +\n                                '</button></li>' +\n                                '<li><button type=\"button\" class=\"se-btn-list se-tooltip\" data-command=\"align\" data-value=\"left\">' +\n                                    icons.align_left +\n                                    '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.dialogBox.left + '</span></span>' +\n                                '</button></li>' +\n                                '<li><button type=\"button\" class=\"se-btn-list se-tooltip\" data-command=\"align\" data-value=\"center\">' +\n                                    icons.align_center +\n                                    '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.dialogBox.center + '</span></span>' +\n                                '</button></li>' +\n                                '<li><button type=\"button\" class=\"se-btn-list se-tooltip\" data-command=\"align\" data-value=\"right\">' +\n                                    icons.align_right +\n                                    '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.dialogBox.right + '</span></span>' +\n                                '</button></li>' +\n                            '</ul>' +\n                        '</div>' +\n                    '</div>' +\n                    '<button type=\"button\" data-command=\"caption\" class=\"se-btn se-tooltip _se_resizing_caption_button\">' +\n                        icons.caption +\n                        '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.dialogBox.caption + '</span></span>' +\n                    '</button>' +\n                    '<button type=\"button\" data-command=\"revert\" class=\"se-btn se-tooltip\">' +\n                        icons.revert +\n                        '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.dialogBox.revertButton + '</span></span>' +\n                    '</button>' +\n                    '<button type=\"button\" data-command=\"update\" class=\"se-btn se-tooltip\">' +\n                        icons.modify +\n                        '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.controller.edit + '</span></span>' +\n                    '</button>' +\n                    '<button type=\"button\" data-command=\"delete\" class=\"se-btn se-tooltip\">' +\n                        icons.delete +\n                        '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + lang.controller.remove + '</span></span>' +\n                    '</button>' +\n                '</div>';\n    \n            return resize_button;\n        },\n    \n        /**\n         * @description Gets the width size\n         * @param {Object} contextPlugin context object of plugin (core.context[plugin])\n         * @param {Element} element Target element\n         * @param {Element} cover Cover element (FIGURE)\n         * @param {Element} container Container element (DIV.se-component)\n         * @returns {String}\n         */\n        _module_getSizeX: function (contextPlugin, element, cover, container) {\n            if (!element) element = contextPlugin._element;\n            if (!cover) cover = contextPlugin._cover;\n            if (!container) container = contextPlugin._container;\n    \n            if (!element) return '';\n    \n            return !/%$/.test(element.style.width) ? element.style.width : ((container && this.util.getNumber(container.style.width, 2)) || 100) + '%';\n        },\n    \n        /**\n         * @description Gets the height size\n         * @param {Object} contextPlugin context object of plugin (core.context[plugin])\n         * @param {Element} element Target element\n         * @param {Element} cover Cover element (FIGURE)\n         * @param {Element} container Container element (DIV.se-component)\n         * @returns {String}\n         */\n        _module_getSizeY: function (contextPlugin, element, cover, container) {\n            if (!element) element = contextPlugin._element;\n            if (!cover) cover = contextPlugin._cover;\n            if (!container) container = contextPlugin._container;\n    \n            if (!container || !cover) return (element && element.style.height) || '';\n    \n            return this.util.getNumber(cover.style.paddingBottom, 0) > 0 && !this.context.resizing._rotateVertical ? cover.style.height : (!/%$/.test(element.style.height) || !/%$/.test(element.style.width) ? element.style.height : ((container && this.util.getNumber(container.style.height, 2)) || 100) + '%');\n        },\n\n        /**\n         * @description Called at the \"openModify\" to put the size of the current target into the size input element.\n         * @param {Object} contextPlugin context object of plugin (core.context[plugin])\n         * @param {Object} pluginObj Plugin object\n         */\n        _module_setModifyInputSize: function (contextPlugin, pluginObj) {\n            const percentageRotation = contextPlugin._onlyPercentage && this.context.resizing._rotateVertical;\n            contextPlugin.proportion.checked = contextPlugin._proportionChecked = contextPlugin._element.getAttribute('data-proportion') !== 'false';\n    \n            let x = percentageRotation ? '' : this.plugins.resizing._module_getSizeX.call(this, contextPlugin);\n            if (x === contextPlugin._defaultSizeX) x = '';\n            if (contextPlugin._onlyPercentage) x = this.util.getNumber(x, 2);\n            contextPlugin.inputX.value = x;\n            pluginObj.setInputSize.call(this, 'x');\n            \n            if (!contextPlugin._onlyPercentage) {\n                let y = percentageRotation ? '' : this.plugins.resizing._module_getSizeY.call(this, contextPlugin);\n                if (y === contextPlugin._defaultSizeY) y = '';\n                if (contextPlugin._onlyPercentage) y = this.util.getNumber(y, 2);\n                contextPlugin.inputY.value = y;\n            }\n            \n            contextPlugin.inputX.disabled = percentageRotation ? true : false;\n            contextPlugin.inputY.disabled = percentageRotation ? true : false;\n            contextPlugin.proportion.disabled = percentageRotation ? true : false;\n    \n            pluginObj.setRatio.call(this);\n        },\n    \n        /**\n         * @description It is called in \"setInputSize\" (input tag keyupEvent), \n         * checks the value entered in the input tag, \n         * calculates the ratio, and sets the calculated value in the input tag of the opposite size.\n         * @param {Object} contextPlugin context object of plugin (core.context[plugin])\n         * @param {String} xy 'x': width, 'y': height\n         */\n        _module_setInputSize: function (contextPlugin, xy) {\n            if (contextPlugin._onlyPercentage) {\n                if (xy === 'x' && contextPlugin.inputX.value > 100) contextPlugin.inputX.value = 100;\n                return;\n            }\n    \n            if (contextPlugin.proportion.checked && contextPlugin._ratio && /\\d/.test(contextPlugin.inputX.value) && /\\d/.test(contextPlugin.inputY.value)) {\n                const xUnit = contextPlugin.inputX.value.replace(/\\d+|\\./g, '') || contextPlugin.sizeUnit;\n                const yUnit = contextPlugin.inputY.value.replace(/\\d+|\\./g, '') || contextPlugin.sizeUnit;\n    \n                if (xUnit !== yUnit) return;\n    \n                const dec = xUnit === '%' ? 2 : 0;\n    \n                if (xy === 'x') {\n                    contextPlugin.inputY.value = this.util.getNumber(contextPlugin._ratioY * this.util.getNumber(contextPlugin.inputX.value, dec), dec) + yUnit;\n                } else {\n                    contextPlugin.inputX.value = this.util.getNumber(contextPlugin._ratioX * this.util.getNumber(contextPlugin.inputY.value, dec), dec) + xUnit;\n                }\n            }\n        },\n    \n        /**\n         * @description It is called in \"setRatio\" (input and proportionCheck tags changeEvent), \n         * checks the value of the input tag, calculates the ratio, and resets it in the input tag.\n         * @param {Object} contextPlugin context object of plugin (core.context[plugin])\n         */\n        _module_setRatio: function (contextPlugin) {\n            const xValue = contextPlugin.inputX.value;\n            const yValue = contextPlugin.inputY.value;\n    \n            if (contextPlugin.proportion.checked && /\\d+/.test(xValue) && /\\d+/.test(yValue)) {\n                const xUnit = xValue.replace(/\\d+|\\./g, '') || contextPlugin.sizeUnit;\n                const yUnit = yValue.replace(/\\d+|\\./g, '') || contextPlugin.sizeUnit;\n    \n                if (xUnit !== yUnit) {\n                    contextPlugin._ratio = false;\n                } else if (!contextPlugin._ratio) {\n                    const x = this.util.getNumber(xValue, 0);\n                    const y = this.util.getNumber(yValue, 0);\n    \n                    contextPlugin._ratio = true;\n                    contextPlugin._ratioX = x / y;\n                    contextPlugin._ratioY = y / x;\n                }\n            } else {\n                contextPlugin._ratio = false;\n            }\n        },\n    \n        /**\n         * @description Revert size of element to origin size (plugin._origin_w, plugin._origin_h)\n         * @param {Object} contextPlugin context object of plugin (core.context[plugin])\n         */\n        _module_sizeRevert: function (contextPlugin) {\n            if (contextPlugin._onlyPercentage) {\n                contextPlugin.inputX.value = contextPlugin._origin_w > 100 ? 100 : contextPlugin._origin_w;\n            } else {\n                contextPlugin.inputX.value = contextPlugin._origin_w;\n                contextPlugin.inputY.value = contextPlugin._origin_h;\n            }\n        },\n    \n        /**\n         * @description Save the size data (element.setAttribute(\"data-size\"))\n         * Used at the \"setSize\" method\n         * @param {Object} contextPlugin context object of plugin (core.context[plugin])\n         */\n        _module_saveCurrentSize: function (contextPlugin) {\n            const x = this.plugins.resizing._module_getSizeX.call(this, contextPlugin);\n            const y = this.plugins.resizing._module_getSizeY.call(this, contextPlugin);\n            contextPlugin._element.setAttribute('data-size', x + ',' + y);\n            if (!!contextPlugin._videoRatio) contextPlugin._videoRatio = y;\n        },\n    \n        /**\n         * @description Call the resizing module\n         * @param {Element} targetElement Resizing target element\n         * @param {string} plugin Plugin name\n         * @returns {Object} Size of resizing div {w, h, t, l}\n         */\n        call_controller_resize: function (targetElement, plugin) {\n            const contextResizing = this.context.resizing;\n            const contextPlugin = this.context[plugin];\n            contextResizing._resize_plugin = plugin;\n    \n            const resizeContainer = contextResizing.resizeContainer;\n            const resizeDiv = contextResizing.resizeDiv;\n            const offset = this.util.getOffset(targetElement, this.context.element.wysiwygFrame);\n    \n            const isVertical = contextResizing._rotateVertical = /^(90|270)$/.test(Math.abs(targetElement.getAttribute('data-rotate')).toString());\n    \n            const w = isVertical ? targetElement.offsetHeight : targetElement.offsetWidth;\n            const h = isVertical ? targetElement.offsetWidth : targetElement.offsetHeight;\n            const t = offset.top;\n            const l = offset.left - this.context.element.wysiwygFrame.scrollLeft;\n    \n            resizeContainer.style.top = t + 'px';\n            resizeContainer.style.left = l + 'px';\n            resizeContainer.style.width = w + 'px';\n            resizeContainer.style.height = h + 'px';\n    \n            resizeDiv.style.top = '0px';\n            resizeDiv.style.left = '0px';\n            resizeDiv.style.width =  w + 'px';\n            resizeDiv.style.height =  h + 'px';\n    \n            let align = targetElement.getAttribute('data-align') || 'basic';\n            align = align === 'none' ? 'basic' : align;\n    \n            // text\n            const container = this.util.getParentElement(targetElement, this.util.isComponent);\n            const cover = this.util.getParentElement(targetElement, 'FIGURE');\n            const displayX = this.plugins.resizing._module_getSizeX.call(this, contextPlugin, targetElement, cover, container) || 'auto';\n            const displayY = contextPlugin._onlyPercentage && plugin === 'image' ? '' : ', ' + (this.plugins.resizing._module_getSizeY.call(this, contextPlugin, targetElement, cover, container) || 'auto');\n            this.util.changeTxt(contextResizing.resizeDisplay, this.lang.dialogBox[align] + ' (' + displayX + displayY + ')');\n    \n            // resizing display\n            contextResizing.resizeButtonGroup.style.display = contextPlugin._resizing ? '' : 'none';\n            const resizeDotShow = contextPlugin._resizing && !contextPlugin._resizeDotHide && !contextPlugin._onlyPercentage ? 'flex' : 'none';\n            const resizeHandles = contextResizing.resizeHandles;\n            for (let i = 0, len = resizeHandles.length; i < len; i++) {\n                resizeHandles[i].style.display = resizeDotShow;\n            }\n    \n            if (contextPlugin._resizing) {\n                const rotations = contextResizing.rotationButtons;\n                rotations[0].style.display = rotations[1].style.display = contextPlugin._rotation ? '' : 'none';\n            }\n    \n            // align icon\n            if (contextPlugin._alignHide) {\n                contextResizing.alignButton.style.display = 'none';\n            } else {\n                contextResizing.alignButton.style.display = '';\n                const alignList = contextResizing.alignMenuList;\n                this.util.changeElement(contextResizing.alignButton.firstElementChild, contextResizing.alignIcons[align]);\n                for (let i = 0, len = alignList.length; i < len; i++) {\n                    if (alignList[i].getAttribute('data-value') === align) this.util.addClass(alignList[i], 'on');\n                    else this.util.removeClass(alignList[i], 'on');\n                }\n            }\n    \n            // percentage active\n            const pButtons = contextResizing.percentageButtons;\n            const value = /%$/.test(targetElement.style.width) && /%$/.test(container.style.width) ? (this.util.getNumber(container.style.width, 0) / 100) + '' : '' ;\n            for (let i = 0, len = pButtons.length; i < len; i++) {\n                if (pButtons[i].getAttribute('data-value') === value) {\n                    this.util.addClass(pButtons[i], 'active');\n                } else {\n                    this.util.removeClass(pButtons[i], 'active');\n                }\n            }\n    \n            // caption display, active\n            if (!contextPlugin._captionShow) {\n                contextResizing.captionButton.style.display = 'none';\n            } else {\n                contextResizing.captionButton.style.display = '';\n                if (this.util.getChildElement(targetElement.parentNode, 'figcaption')) {\n                    this.util.addClass(contextResizing.captionButton, 'active');\n                    contextPlugin._captionChecked = true;\n                } else {\n                    this.util.removeClass(contextResizing.captionButton, 'active');\n                    contextPlugin._captionChecked = false;\n                }\n            }\n\n            resizeContainer.style.display = 'block';\n\n            const addOffset = {left: 0, top: 50};\n            if (this.options.iframe) {\n                addOffset.left -= this.context.element.wysiwygFrame.parentElement.offsetLeft;\n                addOffset.top -= this.context.element.wysiwygFrame.parentElement.offsetTop;\n            }\n\n            this.setControllerPosition(contextResizing.resizeButton, resizeContainer, 'bottom', addOffset);\n            this.controllersOn(resizeContainer, contextResizing.resizeButton, this.util.setDisabledButtons.bind(this.util, false, this.resizingDisabledButtons), targetElement, plugin);\n            this.util.setDisabledButtons(true, this.resizingDisabledButtons);\n    \n            contextResizing._resize_w = w;\n            contextResizing._resize_h = h;\n    \n            const originSize = (targetElement.getAttribute('origin-size') || '').split(',');\n            contextResizing._origin_w = originSize[0] || targetElement.naturalWidth;\n            contextResizing._origin_h = originSize[1] || targetElement.naturalHeight;\n    \n            return {\n                w: w,\n                h: h,\n                t: t,\n                l: l\n            };\n        },\n    \n        _closeAlignMenu: null,\n\n        /**\n         * @description Open align submenu of module\n         */\n        openAlignMenu: function () {\n            const alignButton = this.context.resizing.alignButton;\n            this.util.addClass(alignButton, 'on');\n            this.context.resizing.alignMenu.style.top = (alignButton.offsetTop + alignButton.offsetHeight) + 'px';\n            this.context.resizing.alignMenu.style.left = (alignButton.offsetLeft - alignButton.offsetWidth / 2) + 'px';\n            this.context.resizing.alignMenu.style.display = 'block';\n    \n            this.plugins.resizing._closeAlignMenu = function () {\n                this.util.removeClass(this.context.resizing.alignButton, 'on');\n                this.context.resizing.alignMenu.style.display = 'none';\n                this.removeDocEvent('click', this.plugins.resizing._closeAlignMenu);\n                this.plugins.resizing._closeAlignMenu = null;\n            }.bind(this);\n    \n            this.addDocEvent('click', this.plugins.resizing._closeAlignMenu);\n        },\n    \n        /**\n         * @description Click event of resizing toolbar\n         * Performs the action of the clicked toolbar button.\n         * @param {MouseEvent} e Event object\n         */\n        onClick_resizeButton: function (e) {\n            e.stopPropagation();\n    \n            const target = e.target;\n            const command = target.getAttribute('data-command') || target.parentNode.getAttribute('data-command');\n    \n            if (!command) return;\n    \n            const value = target.getAttribute('data-value') || target.parentNode.getAttribute('data-value');\n    \n            const pluginName = this.context.resizing._resize_plugin;\n            const currentContext = this.context[pluginName];\n            const contextEl = currentContext._element;\n            const currentModule = this.plugins[pluginName];\n    \n            e.preventDefault();\n    \n            if (typeof this.plugins.resizing._closeAlignMenu === 'function') {\n                this.plugins.resizing._closeAlignMenu();\n                if (command === 'onalign') return;\n            }\n    \n            switch (command) {\n                case 'auto':\n                    this.plugins.resizing.resetTransform.call(this, contextEl);\n                    currentModule.setAutoSize.call(this);\n                    this.selectComponent(contextEl, pluginName);\n                    break;\n                case 'percent':\n                    let percentY = this.plugins.resizing._module_getSizeY.call(this, currentContext);\n                    if (this.context.resizing._rotateVertical) {\n                        const percentage = contextEl.getAttribute('data-percentage');\n                        if (percentage) percentY = percentage.split(',')[1];\n                    }\n    \n                    this.plugins.resizing.resetTransform.call(this, contextEl);\n                    currentModule.setPercentSize.call(this, (value * 100), (this.util.getNumber(percentY, 0) === null || !/%$/.test(percentY)) ? '' : percentY);\n                    this.selectComponent(contextEl, pluginName);\n                    break;\n                case 'mirror':\n                    const r = contextEl.getAttribute('data-rotate') || '0';\n                    let x = contextEl.getAttribute('data-rotateX') || '';\n                    let y = contextEl.getAttribute('data-rotateY') || '';\n        \n                    if ((value === 'h' && !this.context.resizing._rotateVertical) || (value === 'v' && this.context.resizing._rotateVertical)) {\n                        y = y ? '' : '180';\n                    } else {\n                        x = x ? '' : '180';\n                    }\n        \n                    contextEl.setAttribute('data-rotateX', x);\n                    contextEl.setAttribute('data-rotateY', y);\n        \n                    this.plugins.resizing._setTransForm(contextEl, r, x, y);\n                    break;\n                case 'rotate':\n                    const contextResizing = this.context.resizing;\n                    const slope = (contextEl.getAttribute('data-rotate') * 1) + (value * 1);\n                    const deg = this._w.Math.abs(slope) >= 360 ? 0 : slope;\n        \n                    contextEl.setAttribute('data-rotate', deg);\n                    contextResizing._rotateVertical = /^(90|270)$/.test(this._w.Math.abs(deg).toString());\n                    this.plugins.resizing.setTransformSize.call(this, contextEl, null, null);\n        \n                    this.selectComponent(contextEl, pluginName);\n                    break;\n                case 'onalign':\n                    this.plugins.resizing.openAlignMenu.call(this);\n                    return;\n                case 'align':\n                    const alignValue = value === 'basic' ? 'none' : value;\n                    currentModule.setAlign.call(this, alignValue, null, null, null);\n                    this.selectComponent(contextEl, pluginName);\n                    break;\n                case 'caption':\n                    const caption = !currentContext._captionChecked;\n                    currentModule.openModify.call(this, true);\n                    currentContext._captionChecked = currentContext.captionCheckEl.checked = caption;\n    \n                    currentModule.update_image.call(this, false, false, false);\n    \n                    if (caption) {\n                        const captionText = this.util.getChildElement(currentContext._caption, function (current) {\n                            return current.nodeType === 3;\n                        });\n    \n                        if (!captionText) {\n                            currentContext._caption.focus();\n                        } else {\n                            this.setRange(captionText, 0, captionText, captionText.textContent.length);\n                        }\n    \n                        this.controllersOff();\n                    } else {\n                        this.selectComponent(contextEl, pluginName);\n                        currentModule.openModify.call(this, true);\n                    }\n    \n                    break;\n                case 'revert':\n                    currentModule.setOriginSize.call(this);\n                    this.selectComponent(contextEl, pluginName);\n                    break;\n                case 'update':\n                    currentModule.openModify.call(this);\n                    this.controllersOff();\n                    break;\n                case 'delete':\n                    currentModule.destroy.call(this);\n                    break;\n            }\n    \n            // history stack\n            this.history.push(false);\n        },\n    \n        /**\n         * @description Initialize the transform style (rotation) of the element.\n         * @param {Element} element Target element\n         */\n        resetTransform: function (element) {\n            const size = (element.getAttribute('data-size') || element.getAttribute('data-origin') || '').split(',');\n            this.context.resizing._rotateVertical = false;\n    \n            element.style.maxWidth = '';\n            element.style.transform = '';\n            element.style.transformOrigin = '';\n            element.setAttribute('data-rotate', '');\n            element.setAttribute('data-rotateX', '');\n            element.setAttribute('data-rotateY', '');\n    \n            this.plugins[this.context.resizing._resize_plugin].setSize.call(this, size[0] ? size[0] : 'auto', size[1] ? size[1] : '', true);\n        },\n    \n        /**\n         * @description Set the transform style (rotation) of the element.\n         * @param {Element} element Target element\n         * @param {Number|null} width Element's width size\n         * @param {Number|null} height Element's height size\n         */\n        setTransformSize: function (element, width, height) {\n            let percentage = element.getAttribute('data-percentage');\n            const isVertical = this.context.resizing._rotateVertical;\n            const deg = element.getAttribute('data-rotate') * 1;\n            let transOrigin = '';\n    \n            if (percentage && !isVertical) {\n                percentage = percentage.split(',');\n                if (percentage[0] === 'auto' && percentage[1] === 'auto') {\n                    this.plugins[this.context.resizing._resize_plugin].setAutoSize.call(this);\n                } else {\n                    this.plugins[this.context.resizing._resize_plugin].setPercentSize.call(this, percentage[0], percentage[1]);\n                }\n            } else {\n                const cover = this.util.getParentElement(element, 'FIGURE');\n        \n                const offsetW = width || element.offsetWidth;\n                const offsetH = height || element.offsetHeight;\n                const w = (isVertical ? offsetH : offsetW) + 'px';\n                const h = (isVertical ? offsetW : offsetH) + 'px';\n        \n                this.plugins[this.context.resizing._resize_plugin].cancelPercentAttr.call(this);\n                this.plugins[this.context.resizing._resize_plugin].setSize.call(this, offsetW + 'px', offsetH + 'px', true);\n        \n                cover.style.width = w;\n                cover.style.height = (!!this.context[this.context.resizing._resize_plugin]._caption ? '' : h);\n    \n                if (isVertical) {\n                    let transW = (offsetW/2) + 'px ' + (offsetW/2) + 'px 0';\n                    let transH = (offsetH/2) + 'px ' + (offsetH/2) + 'px 0';\n                    transOrigin = deg === 90 || deg === -270 ? transH : transW;\n                }\n            }\n    \n            element.style.transformOrigin = transOrigin;\n            this.plugins.resizing._setTransForm(element, deg.toString(), element.getAttribute('data-rotateX') || '', element.getAttribute('data-rotateY') || '');\n            \n            if (isVertical) element.style.maxWidth = 'none';\n            else element.style.maxWidth = '';\n    \n            this.plugins.resizing.setCaptionPosition.call(this, element);\n        },\n    \n        _setTransForm: function (element, r, x, y) {\n            let width = (element.offsetWidth - element.offsetHeight) * (/-/.test(r) ? 1 : -1);\n            let translate = '';\n    \n            if (/[1-9]/.test(r) && (x || y)) {\n                translate = x ? 'Y' : 'X';\n    \n                switch (r) {\n                    case '90':\n                        translate = x && y ? 'X' : y ? translate : '';\n                        break;\n                    case '270':\n                        width *= -1;\n                        translate = x && y ? 'Y' : x ? translate : '';\n                        break;\n                    case '-90':\n                        translate = x && y ? 'Y' : x ? translate : '';\n                        break;\n                    case '-270':\n                        width *= -1;\n                        translate = x && y ? 'X' : y ? translate : '';\n                        break;\n                    default:\n                        translate = '';\n                }\n            }\n    \n            if (r % 180 === 0) {\n                element.style.maxWidth = '';\n            }\n            \n            element.style.transform = 'rotate(' + r + 'deg)' + (x ? ' rotateX(' + x + 'deg)' : '') + (y ? ' rotateY(' + y + 'deg)' : '') + (translate ? ' translate' + translate + '(' + width + 'px)' : '');\n        },\n    \n        /**\n         * @description The position of the caption is set automatically.\n         * @param {Element} element Target element (not caption element)\n         */\n        setCaptionPosition: function (element) {\n            const figcaption = this.util.getChildElement(this.util.getParentElement(element, 'FIGURE'), 'FIGCAPTION');\n            if (figcaption) {\n                figcaption.style.marginTop = (this.context.resizing._rotateVertical ? element.offsetWidth - element.offsetHeight : 0) + 'px';\n            }\n        },\n    \n        /**\n         * @description Mouse down event of resize handles\n         * @param {MouseEvent} e Event object \n         */\n        onMouseDown_resize_handle: function (e) {\n            e.stopPropagation();\n            e.preventDefault();\n            \n            const contextResizing = this.context.resizing;\n            const direction = contextResizing._resize_direction = e.target.classList[0];\n    \n            contextResizing._resizeClientX = e.clientX;\n            contextResizing._resizeClientY = e.clientY;\n            this.context.element.resizeBackground.style.display = 'block';\n            contextResizing.resizeButton.style.display = 'none';\n            contextResizing.resizeDiv.style.float = /l/.test(direction) ? 'right' : /r/.test(direction) ? 'left' : 'none';\n    \n            const closureFunc_bind = function closureFunc(e) {\n                if (e.type === 'keydown' && e.keyCode !== 27) return;\n    \n                const change = contextResizing._isChange;\n                contextResizing._isChange = false;\n    \n                this.removeDocEvent('mousemove', resizing_element_bind);\n                this.removeDocEvent('mouseup', closureFunc_bind);\n                this.removeDocEvent('keydown', closureFunc_bind);\n                \n                if (e.type === 'keydown') {\n                    this.controllersOff();\n                    this.context.element.resizeBackground.style.display = 'none';\n                    this.plugins[this.context.resizing._resize_plugin].init.call(this);\n                } else {\n                    // element resize\n                    this.plugins.resizing.cancel_controller_resize.call(this, direction);\n                    // history stack\n                    if (change) this.history.push(false);\n                }\n            }.bind(this);\n    \n            const resizing_element_bind = this.plugins.resizing.resizing_element.bind(this, contextResizing, direction, this.context[contextResizing._resize_plugin]);\n            this.addDocEvent('mousemove', resizing_element_bind);\n            this.addDocEvent('mouseup', closureFunc_bind);\n            this.addDocEvent('keydown', closureFunc_bind);\n        },\n    \n        /**\n         * @description Mouse move event after call \"onMouseDown_resize_handle\" of resize handles\n         * The size of the module's \"div\" is adjusted according to the mouse move event.\n         * @param {Object} contextResizing \"core.context.resizing\" object (binding argument)\n         * @param {String} direction Direction (\"tl\", \"tr\", \"bl\", \"br\", \"lw\", \"th\", \"rw\", \"bh\") (binding argument)\n         * @param {Object} plugin \"core.context[currentPlugin]\" object (binding argument)\n         * @param {MouseEvent} e Event object\n         */\n        resizing_element: function (contextResizing, direction, plugin, e) {\n            const clientX = e.clientX;\n            const clientY = e.clientY;\n    \n            let resultW = plugin._element_w;\n            let resultH = plugin._element_h;\n    \n            const w = plugin._element_w + (/r/.test(direction) ? clientX - contextResizing._resizeClientX : contextResizing._resizeClientX - clientX);\n            const h = plugin._element_h + (/b/.test(direction) ? clientY - contextResizing._resizeClientY : contextResizing._resizeClientY - clientY);\n            const wh = ((plugin._element_h / plugin._element_w) * w);\n    \n            if (/t/.test(direction)) contextResizing.resizeDiv.style.top = (plugin._element_h - (/h/.test(direction) ? h : wh)) + 'px';\n            if (/l/.test(direction)) contextResizing.resizeDiv.style.left = (plugin._element_w - w) + 'px';\n    \n            if (/r|l/.test(direction)) {\n                contextResizing.resizeDiv.style.width = w + 'px';\n                resultW = w;\n            }\n    \n            if (/^(t|b)[^h]$/.test(direction)) {\n                contextResizing.resizeDiv.style.height = wh + 'px';\n                resultH = wh;\n            }\n            else if (/^(t|b)h$/.test(direction)) {\n                contextResizing.resizeDiv.style.height = h + 'px';\n                resultH = h;\n            }\n    \n            contextResizing._resize_w = resultW;\n            contextResizing._resize_h = resultH;\n            this.util.changeTxt(contextResizing.resizeDisplay, this._w.Math.round(resultW) + ' x ' + this._w.Math.round(resultH));\n            contextResizing._isChange = true;\n        },\n    \n        /**\n         * @description Resize the element to the size of the \"div\" adjusted in the \"resizing_element\" method.\n         * Called at the mouse-up event registered in \"onMouseDown_resize_handle\".\n         * @param {String} direction Direction (\"tl\", \"tr\", \"bl\", \"br\", \"lw\", \"th\", \"rw\", \"bh\")\n         */\n        cancel_controller_resize: function (direction) {\n            const isVertical = this.context.resizing._rotateVertical;\n            this.controllersOff();\n            this.context.element.resizeBackground.style.display = 'none';\n    \n            let w = this._w.Math.round(isVertical ? this.context.resizing._resize_h : this.context.resizing._resize_w);\n            let h = this._w.Math.round(isVertical ? this.context.resizing._resize_w : this.context.resizing._resize_h);\n    \n            if (!isVertical && !/%$/.test(w)) {\n                const padding = 16;\n                const limit = this.context.element.wysiwygFrame.clientWidth - (padding * 2) - 2;\n                \n                if (this.util.getNumber(w, 0) > limit) {\n                    h = this._w.Math.round((h / w) * limit);\n                    w = limit;\n                }\n            }\n    \n            const pluginName = this.context.resizing._resize_plugin;\n            this.plugins[pluginName].setSize.call(this, w, h, false, direction);\n            if (isVertical) this.plugins.resizing.setTransformSize.call(this, this.context[this.context.resizing._resize_plugin]._element, w, h);\n\n            this.selectComponent(this.context[pluginName]._element, pluginName);\n        }\n    };\n\n    if (typeof noGlobal === typeof undefined) {\n        if (!window.SUNEDITOR_MODULES) {\n            Object.defineProperty(window, 'SUNEDITOR_MODULES', {\n                enumerable: true,\n                writable: false,\n                configurable: false,\n                value: {}\n            });\n        }\n\n        Object.defineProperty(window.SUNEDITOR_MODULES, 'resizing', {\n            enumerable: true,\n            writable: false,\n            configurable: false,\n            value: resizing\n        });\n    }\n\n    return resizing;\n}));"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}